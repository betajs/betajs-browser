/*!
betajs-browser - v1.0.104 - 2018-11-28
Copyright (c) Oliver Friedmann
Apache-2.0 Software License.
*/

(function(){var a=this.subScope();a.binding("module","global:BetaJS.Browser"),a.binding("base","global:BetaJS"),a.define("module:",function(){return{guid:"02450b15-9bbf-4be2-b8f6-b483bc015d06",version:"1.0.104",datetime:1543421948127}}),a.assumeVersion("base:version","~1.0.104"),a.define("module:Ajax.IframePostmessageAjax",["base:Ajax.Support","base:Net.Uri","base:Net.HttpHeader","base:Promise","base:Types","base:Ajax.RequestException","base:Tokens","base:Objs"],function(a,b,c,d,e,f,g,h){var i=1,j={supports:function(a){return!!a.postmessage},execute:function(c){var f="postmessage_"+g.generate_token()+"_"+i++,j=h.objectBy(c.postmessage,f);j=h.extend(j,c.query);var k=b.appendUriParams(c.uri,j),l=document.createElement("iframe");l.id=f,l.name=f,l.style.display="none";var m=document.createElement("form");m.method=c.method,m.target=f,m.action=k,m.style.display="none";var n=d.create();document.body.appendChild(l),document.body.appendChild(m),h.iter(c.data,function(a,b){var c=document.createElement("input");c.type="hidden",c.name=b,c.value=e.is_array(a)||e.is_object(a)?JSON.stringify(a):a,m.appendChild(c)},this);var o=!("postMessage"in window),p=null,q=function(a){p(a.data)};return p=function(b){"string"==typeof b&&(b=JSON.parse(b)),f in b&&(b=b[f],o&&(window.postMessage=null),window.removeEventListener("message",q,!1),document.body.removeChild(m),document.body.removeChild(l),a.promiseReturnData(n,c,b,"json"))},l.onerror=function(){o&&(window.postMessage=null),window.removeEventListener("message",q,!1),document.body.removeChild(m),document.body.removeChild(l)},window.addEventListener("message",q,!1),o&&(window.postMessage=p),m.submit(),n}};return a.register(j,4),j}),a.define("module:Ajax.JsonpScriptAjax",["base:Ajax.Support","base:Net.Uri","base:Net.HttpHeader","base:Promise","base:Types","base:Ajax.RequestException","base:Tokens","base:Objs","base:Async","module:Info"],function(a,b,c,d,e,f,g,h,i,j){var k=1,l={supports:function(a){return!!a.jsonp&&"GET"===a.method},execute:function(e){var f="jsonp_"+g.generate_token()+"_"+k++,l=h.objectBy(e.jsonp,f);l=h.extend(l,e.query),l=h.extend(l,e.data);var m=b.appendUriParams(e.uri,l),n=!1;window[f]=function(b){if(!n){n=!0;try{delete window[f]}catch(c){window[f]=undefined}a.promiseReturnData(o,e,b,"json")}};var o=d.create(),p=document.getElementsByTagName("head")[0],q=document.createElement("script"),r=!1;return q.onerror=function(b){b&&(b.stopPropagation?b.stopPropagation():b.cancelBubble=!0),n||(n=!0,a.promiseRequestException(o,c.HTTP_STATUS_BAD_REQUEST,c.format(c.HTTP_STATUS_BAD_REQUEST),null,"json"))},q.onload=q.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,q.onload=q.onreadystatechange=null,p.removeChild(q),j.isInternetExplorer()&&j.internetExplorerVersion()<9&&i.eventually(function(){n||q.onerror()}))},q.src=m,p.appendChild(q),o}};return a.register(l,5),l}),a.define("module:Ajax.XDomainRequestAjax",["base:Ajax.Support","base:Net.Uri","base:Net.HttpHeader","base:Promise","base:Types","base:Ajax.RequestException","module:Info","base:Async","base:Ids"],function(a,b,c,d,e,f,g,h,i){var j={__requests:{},supports:function(a){return!!window.XDomainRequest&&(!a.forceJsonp&&!a.forcePostmessage&&(!!a.isCorsRequest&&!(!g.isInternetExplorer()||g.internetExplorerVersion()>9)))},execute:function(f){var g=b.appendUriParams(f.uri,f.query||{});"GET"===f.method&&(g=b.appendUriParams(g,f.data||{}));var k=d.create(),l=new XDomainRequest;return j.__requests[i.objectId(l)]=l,l.onload=function(){a.promiseReturnData(k,f,l.responseText,"json"),delete j.__requests[i.objectId(l)]},l.ontimeout=function(){a.promiseRequestException(k,c.HTTP_STATUS_GATEWAY_TIMEOUT,c.format(c.HTTP_STATUS_GATEWAY_TIMEOUT),null,"json"),delete j.__requests[i.objectId(l)]},l.onerror=function(){a.promiseRequestException(k,c.HTTP_STATUS_BAD_REQUEST,c.format(c.HTTP_STATUS_BAD_REQUEST),null,"json"),delete j.__requests[i.objectId(l)]},l.open(f.method,g),h.eventually(function(){"GET"===f.method||e.is_empty(f.data)?l.send():"json"===f.contentType?l.send(JSON.stringify(f.data)):l.send(b.encodeUriParams(f.data,undefined,!0))},this),k}};return a.register(j,9),j}),a.define("module:Ajax.XmlHttpRequestAjax",["base:Ajax.Support","base:Net.Uri","base:Net.HttpHeader","base:Promise","base:Types","base:Objs","base:Ajax.RequestException","module:Info"],function(a,b,c,d,e,f,g,h){var i={supports:function(a){if("undefined"==typeof window)return!0;if(!window.XMLHttpRequest)return!1;if(a.forceJsonp||a.forcePostmessage)return!1;if(h.isInternetExplorer()&&h.internetExplorerVersion()<10&&a.isCorsRequest)return!1;try{f.iter(a.data,function(b){("undefined"!=typeof window.Blob&&b instanceof window.Blob||"undefined"!=typeof File&&b instanceof File)&&(a.requireFormData=!0)}),a.requireFormData&&new window.FormData}catch(b){a.requireFormData=!1}return!0},execute:function(g,h,i){var j=b.appendUriParams(g.uri,g.query||{});"GET"===g.method&&(j=b.appendUriParams(j,g.data||{}));var k=d.create(),l=new XMLHttpRequest;if(l.onreadystatechange=function(){4===l.readyState&&(c.isSuccessStatus(l.status)||0===l.status&&l.responseText?a.promiseReturnData(k,g,"xml"===g.contentType?l.responseXML:l.responseText,g.decodeType||"json"):a.promiseRequestException(k,l.status,l.statusText,l.responseText,g.decodeType||"json"))},h&&((l.upload||l).onprogress=function(a){a.lengthComputable&&h.call(i||this,a.loaded,a.total)}),l.open(g.method,j,!0),g.corscreds&&(l.withCredentials=!0),g.bearer&&l.setRequestHeader("Authorization","Bearer "+g.bearer),"GET"===g.method||e.is_empty(g.data))l.send();else if(g.requireFormData){var m=new window.FormData;f.iter(g.data,function(a,b){m.append(b,a)},this),l.send(m)}else"json"===g.contentType?(g.sendContentType&&l.setRequestHeader("Content-Type","application/json;charset=UTF-8"),l.send(JSON.stringify(g.data))):"xml"===g.contentType?(l.overrideMimeType("application/xml"),l.send(JSON.stringify(g.data))):(g.sendContentType&&l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send(b.encodeUriParams(g.data,undefined,!0)));return k}};return a.register(i,10),i}),a.define("module:Apps",["base:Time","base:Async","base:Promise","module:Info","module:Loader"],function(a,b,c,d,e){return{STATE_INCOMPATIBLE_DEVICE:1,STATE_APP_LAUNCHED:2,STATE_APP_INSTALLED_AND_LAUNCHED:3,STATE_APP_NOT_INSTALLED:4,STATE_UNKNOWN:5,launch:function(e){var f=c.create(),g=a.now();return d.isiOS()&&e.ios?(b.eventually(function(){a.now()-g>3e3?f.asyncSuccess(this.STATE_APP_LAUNCHED):(g=a.now(),b.eventually(function(){a.now()-g>3e3?f.asyncSuccess(this.STATE_APP_INSTALLED_AND_LAUNCHED):f.asyncError(this.STATE_APP_NOT_INSTALLED)},this,2500),document.location=e.ios.install)},this,2500),document.location=e.ios.launch):f.asyncError(this.STATE_INCOMPATIBLE_DEVICE),f},appStoreLink:function(a){return"itms://itunes.apple.com/us/app/"+a+"?mt=8&uo=4"},playStoreLink:function(a){return"http://play.google.com/store/apps/details?id=<"+a+">"},iOSAppURL:function(a,b){return a+"://"+b},androidAppUrl:function(a,b){return a+"://"+b},googleIntent:function(a,b,c){return"intent://"+b+";scheme="+a+";package="+c+";end"}}}),a.define("module:Blobs",["base:Promise"],function(a){return{createBlobByArrayBufferView:function(a,b,c,d){try{return new window.Blob([new DataView(a,b,c)],{type:d})}catch(g){try{return new window.Blob([new Uint8Array(a,b,c)],{type:d})}catch(h){var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,f=new e;return f.append(a.slice(b,b+c)),f.getBlob(d)}}},loadFileIntoArrayBuffer:function(b){var c=a.create();try{var d=new FileReader;d.onloadend=function(a){c.asyncSuccess(a.target.result)},d.readAsArrayBuffer(b.files?b.files[0]:b)}catch(e){c.asyncError(e)}return c},loadFileIntoString:function(b){var c=a.create();try{var d=new FileReader;d.onloadend=function(a){c.asyncSuccess(a.target.result)},d.readAsText(b.files?b.files[0]:b)}catch(e){c.asyncError(e)}return c}}}),a.define("module:Cookies",["base:Net.Cookies"],function(a){return{get:function(b){return a.getCookielikeValue(document.cookie,b)},set:function(b,c,d,e,f,g){document.cookie=a.createCookielikeValue(b,c,d,e,f,g)},remove:function(b,c,d,e){document.cookie=a.removeCookielikeValue(b,c,d,e)},has:function(b){return a.hasCookielikeValue(document.cookie,b)},keys:function(){return a.keysCookielike(document.cookie)}}}),a.define("module:Events",["base:Class","base:Objs","base:Functions","module:Dom"],function(a,b,c,d,e){return a.extend({scoped:e},function(a){return{constructor:function(){a.constructor.call(this),this.__callbacks={}},destroy:function(){this.clear(),a.destroy.call(this)},on:function(a,b,e,f,g){return b.split(" ").forEach(function(b){if(b){var h=c.as_method(e,f||a);a.addEventListener(b,h,!(!g||!d.passiveEventsSupported())&&g),this.__callbacks[b]=this.__callbacks[b]||[],this.__callbacks[b].push({element:a,callback_function:h,callback:e,context:f})}},this),this},off:function(a,b,c,d){return b.split(" ").forEach(function(b){if(b){var e=this.__callbacks[b];if(e)for(var f=0;f<e.length;){var g=e[f];a&&a!==g.element||c&&c!==g.callback||d&&d!==g.context?++f:(g.element.removeEventListener(b,g.callback_function,!1),e[f]=e[e.length-1],e.pop())}}},this),this},clear:function(){b.iter(this.__callbacks,function(a,b){a.forEach(function(a){a.element.removeEventListener(b,a.callback_function,!1)})}),this.__callbacks={}}}})}),a.define("module:FlashDetect",["base:Class"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(){if(a.constructor.call(this),this.__version=null,navigator.plugins&&navigator.plugins.length>0){var b="application/x-shockwave-flash",c=navigator.mimeTypes;c&&c[b]&&c[b].enabledPlugin&&c[b].enabledPlugin.description&&(this.__version=this.parseVersion(c[b].enabledPlugin.description))}else if(-1==navigator.appVersion.indexOf("Mac")&&"execScript"in window)for(var d=0;d<this.__activeXDetectRules.length;d++)try{var e=new ActiveXObject(this.__activeXDetectRules[d].name),f=this.__activeXDetectRules[d].version(e);if(f){this.__version=this.parseActiveXVersion(f);break}}catch(g){}},parseVersion:function(a){var b=a.split(/ +/),c=b[2].split(/\./),d=b[3];return{raw:a,major:parseInt(c[0],10),minor:parseInt(c[1],10),revisionStr:d,revision:parseInt(d.replace(/[a-zA-Z]/g,""),10)}},parseActiveXVersion:function(a){var b=a.split(",");return{raw:a,major:parseInt(b[0].split(" ")[1],10),minor:parseInt(b[1],10),revision:parseInt(b[2],10),revisionStr:b[2]}},version:function(){return this.__version},installed:function(){return null!==this.__version},supported:function(){var a=navigator.userAgent;return this.installed()||!(-1!=a.indexOf("iPhone")||-1!=a.indexOf("iPod")||-1!=a.indexOf("iPad"))},majorAtLeast:function(a){return this.installed()&&this.version().major>=a},minorAtLeast:function(a){return this.installed()&&this.version().minor>=a},revisionAtLeast:function(a){return this.installed()&&this.version().revision>=a},versionAtLeast:function(a){if(!this.installed())return!1;for(var b=[this.version().major,this.version().minor,this.version().revision],c=Math.min(b.length,arguments.length),d=0;d<c;d++)if(b[d]!=arguments[d])return b[d]>arguments[d];return!0},__activeXDetectRules:[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(a){try{return a.GetVariable("$version")}catch(b){return null}}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(a){try{a.AllowScriptAccess="always";try{return a.GetVariable("$version")}catch(b){return null}}catch(b){return"6,0,21"}}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(a){try{return a.GetVariable("$version")}catch(b){return null}}}]}})}),a.define("module:FlashHelper",["base:Time","base:Objs","base:Types","base:Net.Uri","base:Ids","module:Info","module:Dom"],function(a,b,c,d,e,f,g){return{getFlashObject:function(a){a=g.unbox(a);var b=a.getElementsByTagName("EMBED")[0];if(f.isInternetExplorer()&&f.internetExplorerVersion()<=10&&(b=null),b||(b=a.getElementsByTagName("OBJECT")[0]),!b)for(var c=document.getElementsByTagName("OBJECT"),d=0;d<c.length;++d)a.contains(c[d])&&(b=c[d]);return b},embedTemplate:function(f){f=f||{};var g=[];g.push({objectKey:"classid",value:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}),g.push({objectKey:"codebase",value:"http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"}),g.push({embedKey:"align",value:"middle"}),g.push({embedKey:"play",value:"true"}),g.push({embedKey:"loop",value:"false"}),g.push({embedKey:"type",value:"application/x-shockwave-flash"}),g.push({embedKey:"pluginspage",value:"http://www.adobe.com/go/getflashplayer"}),g.push({objectParam:"quality",embedKey:"quality",value:"high"}),g.push({objectParam:"allowScriptAccess",embedKey:"allowScriptAccess",value:"always"}),g.push({objectParam:"wmode",embedKey:"wmode",value:"opaque"}),g.push({objectParam:"movie",embedKey:"src",value:f.flashFile+(f.forceReload?"?"+a.now():"")}),f.width&&g.push({objectKey:"width",embedKey:"width",value:f.width}),f.height&&g.push({objectKey:"height",embedKey:"height",value:f.height}),f.bgcolor&&g.push({objectParam:"bgcolor",embedKey:"bgcolor",value:f.bgcolor}),f.FlashVars&&g.push({objectParam:"FlashVars",embedKey:"FlashVars",value:c.is_object(f.FlashVars)?d.encodeUriParams(f.FlashVars):f.FlashVars}),g.push({objectKey:"id",value:f.objectId||e.uniqueId("flash")});var h=[],i=[],j=[];return b.iter(g,function(a){a.objectKey&&h.push(a.objectKey+'="'+a.value+'"'),a.embedKey&&j.push(a.embedKey+'="'+a.value+'"'),a.objectParam&&i.push('<param name="'+a.objectParam+'" value="'+a.value+'" />')},this),"<object "+h.join(" ")+">"+i.join(" ")+"<embed "+j.join(" ")+"></embed></object>"},embedFlashObject:function(a,b){if(a=g.unbox(a),b=b||{},b.parentBgcolor)try{var c=a.style.backgroundColor||"";if(c.indexOf("rgb")>=0){var d=c.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e=function(a){return("0"+parseInt(a,10).toString(16)).slice(-2)};d&&d.length>3&&(c="#"+e(d[1])+e(d[2])+e(d[3]))}b.bgcolor=c}catch(h){}if(b.fixHalfPixels)try{var f=g.elementOffset(a);f.top%1!=0&&(a.style.marginTop=Math.round(f.top)-f.top+"px"),f.left%1!=0&&(a.style.marginLeft=Math.round(f.left)-f.left+"px")}catch(h){}return a.innerHTML=this.embedTemplate(b),this.getFlashObject(a)}}}),a.define("module:Hotkeys",["base:Objs"],function(a){return{SHIFT_NUMS:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},SPECIAL_KEYS:{esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},MODIFIERS:["ctrl","alt","shift","meta"],keyCodeToCharacter:function(a){return 188==a?",":190==a?".":String.fromCharCode(a).toLowerCase()},handleKeyEvent:function(b,c,d){d=a.extend({disable_in_input:!1,keycode:!1},d);var e=b.toLowerCase().split("+");if(d.disable_in_input){var f=c.target||c.srcElement||null;if(f&&3==f.nodeType&&(f=f.parentNode),f&&("INPUT"==f.tagName||"TEXTAREA"==f.tagName))return!1}var g=c.keyCode||c.which||0,h=this.keyCodeToCharacter(g),i=0,j={};a.iter(this.MODIFIERS,function(a){j[a]={pressed:c[a+"Key"],wanted:!1}},this),a.iter(e,function(a){a in j?(j[a].wanted=!0,i++):a.length>1?this.SPECIAL_KEYS[a]==g&&i++:d.keycode?d.keycode==g&&i++:(h==a||c.shiftKey&&this.SHIFT_NUMS[h]==a)&&i++},this);var k=b.toLowerCase().split("^");return k.length>1&&a.iter(k,function(a){a.length>1&&c.keyCode===this.SPECIAL_KEYS[a]&&(32===g&&c.preventDefault(),this.SPECIAL_KEYS[a]==g&&i++)},this),i==e.length&&a.all(j,function(a){return a.wanted==a.pressed})},register:function(b,c,d,e){e=a.extend({type:"keyup",propagate:!1,disable_in_input:!1,target:document,keycode:!1},e);var f=this,g=function(a){f.handleKeyEvent(b,a,e)&&(e.propagate||(a.preventDefault(),a.stopPropagation()),c.call(d||this,a))};return e.target.addEventListener(e.type,g,!1),{target:e.target,type:e.type,func:g}},unregister:function(a){a.target.removeEventListener(a.type,a.func,!1)}}}),a.define("module:Info",["base:Objs","module:FlashDetect"],function(a,b){return{__navigator:null,getNavigator:function(){return this.__navigator||(this.__navigator={appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,platform:navigator.platform,userAgent:navigator.userAgent,window_chrome:"chrome"in window,window_opera:"opera"in window,language:navigator.language||navigator.userLanguage||""}),this.__navigator},__cache:{},__cached:function(a,b,c){if(!(a in this.__cache)||c){var d=this.getNavigator();this.__cache[a]=b.call(this,d,d.userAgent,d.userAgent.toLowerCase())}return this.__cache[a]},setNavigator:function(a){this.__navigator=a,this.__cache={}},language:function(){return this.__cached("language",function(a){return a.language})},flash:function(a){return this.__cached("flash",function(){return new b},a)},isiOS:function(){return this.__cached("isiOS",function(a,b){return!this.isInternetExplorer()&&!this.isIEMobile()&&(-1!=b.indexOf("iPhone")||-1!=b.indexOf("iPod")||-1!=b.indexOf("iPad"))})},isEdge:function(){return this.__cached("isEdge",function(a,b){return-1!=b.indexOf("Edge")})},isCordova:function(){return!!window.cordova||!!window._cordovaNative||0===document.location.href.indexOf("file:///android_asset/www")||0===document.location.href.indexOf("file:///var/mobile/Containers/Bundle/Application")},isLocalCordova:function(){return this.__cached("isLocalCordova",function(){return this.isCordova()&&0!==document.location.href.indexOf("http")})},isChrome:function(){return this.__cached("isChrome",function(a,b){return(a.window_chrome||-1!=b.indexOf("CriOS"))&&!this.isOpera()&&!this.isEdge()})},isChromium:function(){return this.__cached("isChromium",function(a,b,c){return!this.isChrome()&&this.isAndroid()&&c.indexOf("linux")>=0})},isChromiumBased:function(){return this.__cached("isChromiumBased",function(){return this.isChrome()||this.isChromium()})},isOpera:function(){return this.__cached("isOpera",function(a,b){return a.window_opera||b.indexOf(" OPR/")>=0||b.indexOf("OPiOS")>=0||b.indexOf("Opera")>=0})},isAndroid:function(){return this.__cached("isAndroid",function(a,b,c){return-1!=c.indexOf("android")})},isWebOS:function(){return this.__cached("isWebOS",function(a,b,c){return-1!=c.indexOf("webos")})},isWindowsPhone:function(){return this.__cached("isWindowsPhone",function(a,b,c){return-1!=c.indexOf("windows phone")})},isBlackberry:function(){return this.__cached("isBlackberry",function(a,b,c){return-1!=c.indexOf("blackberry")})},iOSversion:function(){return this.__cached("iOSversion",function(a){if(!this.isiOS())return!1;var b=a.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return{major:parseInt(b[1],10),minor:parseInt(b[2],10),revision:parseInt(b[3]||0,10)}})},androidVersion:function(){return this.__cached("androidVersion",function(a){if(!this.isAndroid())return!1;var b=a.userAgent.match(/Android (\d+)\.(\d+)\.?(\d+)?/);return{major:parseInt(b[1],10),minor:parseInt(b[2],10),revision:parseInt(b[3]||0,10)}})},isMobile:function(){return this.__cached("isMobile",function(){return this.isiOS()||this.isAndroid()||this.isWebOS()||this.isWindowsPhone()||this.isBlackberry()})},isDesktop:function(){return this.__cached("isDesktop",function(){return!this.isMobile()})},isInternetExplorer:function(){return this.__cached("isInternetExplorer",function(){return!this.isIEMobile()&&null!==this.internetExplorerVersion()})},isIEMobile:function(){return this.__cached("isIEMobile",function(a,b,c){return c.indexOf("iemobile")>=0})},isFirefox:function(){return this.__cached("isFirefox",function(a,b,c){return-1!=c.indexOf("firefox")||-1!=c.indexOf("fxios")})},isSafari:function(){return this.__cached("isSafari",function(a,b,c){return!(this.isChrome()||this.isOpera()||this.isEdge()||this.isFirefox()||-1==c.indexOf("safari")||this.isAndroid())})},isWindows:function(){return this.__cached("isWindows",function(a){return-1!=a.appVersion.toLowerCase().indexOf("win")&&!this.isWindowsPhone()})},isMacOS:function(){return this.__cached("isMacOS",function(a){return!this.isiOS()&&-1!=a.appVersion.toLowerCase().indexOf("mac")})},isUnix:function(){return this.__cached("isUnix",function(a){return-1!=a.appVersion.toLowerCase().indexOf("x11")})},isLinux:function(){return this.__cached("isLinux",function(a){return!this.isAndroid()&&-1!=a.appVersion.toLowerCase().indexOf("linux")})},internetExplorerVersion:function(){return this.__cached("internetExplorerVersion",function(a,b){if("Microsoft Internet Explorer"==a.appName){var c=new RegExp("MSIE ([0-9]+)"),d=c.exec(b);if(d)return d[1]}else if("Netscape"==a.appName){var e=new RegExp("Trident/.*rv:([0-9]+)"),f=e.exec(a.userAgent);if(f)return parseFloat(f[1])}return null})},chromeVersion:function(){return this.__cached("chromeVersion",function(a,b){var c=/Chrome\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},operaVersion:function(){return this.__cached("operaVersion",function(a,b){var c=/OPR\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},safariVersion:function(){return this.__cached("safariVersion",function(a,b){var c=/Version\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},firefoxVersion:function(){return this.__cached("firefoxVersion",function(a,b){var c=/Firefox\/(\d+\.\d+)/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},inIframe:function(){try{return window.self!==window.top}catch(a){return!0}},__devicesMap:{mobile:{format:"Mobile",check:function(){return this.isMobile()}},desktop:{format:"Desktop",check:function(){return this.isDesktop()}}},__obtainMatch:function(b,c){var d=null;return a.iter(b,function(b,c){if(b.check.apply(this)){if(d)return d=null,!1;d=a.clone(b,1),delete d.check,d.key=c}},this),d||c},getDevice:function(){return this.__cached("getDevice",function(){return this.__obtainMatch(this.__devicesMap,{key:"unknown",format:"Unknown Device"})})},formatDevice:function(){return this.getDevice().format},__osMap:{macosx:{format:"Mac OS-X",check:function(){return this.isMacOS()}},windows:{format:"Windows",check:function(){return this.isWindows()}},unix:{format:"Unix",check:function(){return this.isUnix()}},linux:{format:"Linux",check:function(){return this.isLinux()}},ios:{format:"iOS",check:function(){return this.isiOS()},version:function(){return this.iOSversion().major+"."+this.iOSversion().minor+"."+this.iOSversion().revision}},android:{format:"Android",check:function(){return this.isAndroid()}},webos:{format:"WebOS",check:function(){return this.isWebOS()}},windowsphone:{format:"Windows Phone",check:function(){return this.isWindowsPhone()}},blackberry:{format:"Blackberry",check:function(){return this.isBlackberry()}}},getOS:function(){return this.__cached("getOS",function(){return this.__obtainMatch(this.__osMap,{key:"unknown",format:"Unknown Operating System"})})},formatOS:function(){return this.getOS().format},formatOSVersion:function(){return this.getOS().version?this.getOS().version.apply(this):""},__browserMap:{chrome:{format:"Chrome",check:function(){return this.isChrome()},version:function(){return this.chromeVersion()}},chromium:{format:"Chromium",check:function(){return this.isChromium()}},opera:{format:"Opera",check:function(){return this.isOpera()},version:function(){return this.operaVersion()}},internetexplorer:{format:"Internet Explorer",check:function(){return this.isInternetExplorer()},version:function(){return this.internetExplorerVersion()}},firefox:{format:"Firefox",check:function(){return this.isFirefox()},version:function(){return this.firefoxVersion()}},safari:{format:"Safari",check:function(){return this.isSafari()},version:function(){return this.safariVersion()}},webos:{format:"WebOS",check:function(){return this.isWebOS()}},blackberry:{format:"Blackberry",check:function(){return this.isBlackberry()}},edge:{format:"Edge",check:function(){return this.isEdge()}},iemobile:{format:"IE Mobile",check:function(){return this.isIEMobile()}}},getBrowser:function(){return this.__cached("getBrowser",function(){return this.__obtainMatch(this.__browserMap,{key:"unknown",format:"Unknown Browser"})})},formatBrowser:function(){return this.getBrowser().format},formatBrowserVersion:function(){return this.getBrowser().version?this.getBrowser().version.apply(this):""},formatFlash:function(){return this.flash().installed()?"Flash "+this.flash().version().raw:this.flash().supported()?"Flash not installed but supported":"Flash not supported"}}}),a.define("module:Loader",["base:Ajax.Support","module:Info"],function(a,b){return{loadScript:function(a,b,c){var d=!1,e=document.getElementsByTagName("head")[0],f=document.createElement("script");f.src=a,f.onload=f.onreadystatechange=function(){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,f.onload=f.onreadystatechange=null,b&&b.call(c||this,a))},e.appendChild(f)},loadStyles:function(a,b,c){var d=!1,e=document.getElementsByTagName("head")[0],f=document.createElement("link");f.rel="stylesheet",f.href=a,f.onload=f.onreadystatechange=function(){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,f.onload=f.onreadystatechange=null,b&&b.call(c||this,a))},e.appendChild(f)},inlineStyles:function(a){var c=document.getElementsByTagName("head")[0],d=document.createElement("style");return b.isInternetExplorer()&&b.internetExplorerVersion()<9?(d.setAttribute("type","text/css"),d.styleSheet.cssText=a):d.textContent=a,c.appendChild(d),d},loadHtml:function(b,c,d){a.execute({uri:b,decodeType:"html"}).success(function(a){c.call(this,a,b)},d)},findScript:function(a){for(var b=0;b<document.scripts.length;++b)if(document.scripts[b].src.toLowerCase().indexOf(a.toLowerCase())>=0)return document.scripts[b];return null},loadByIframe:function(a,b,c){var d=document.createElement("iframe");a.visible?(d.style.border="none",d.style.width="1px",d.style.height="1px"):d.style.display="none";var e=function(){var e=null,f=null;try{e=d.contentDocument.body,f=e.textContent||e.innerText}catch(g){}b.call(c||this,f,e,d),a.remove&&document.body.removeChild(d)};d.attachEvent?d.attachEvent("onload",e):d.onload=e,d.src=a.url,document.body.appendChild(d)}}}),a.define("module:HashRouteBinder",["base:Router.RouteBinder","module:Events"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c),this.auto_destroy(new b).on(window,"hashchange",function(){this._localRouteChanged()},this)},_getLocalRoute:function(){var a=window.location.hash;return a.length&&"#"==a[0]?a.slice(1):a},_setLocalRoute:function(a){window.location.hash="#"+a.route}}})}),a.define("module:HistoryRouteBinder",["base:Router.RouteBinder","module:Events"],function(a,b,c){return a.extend({scoped:c},function(a){return{__used:!1,constructor:function(c){a.constructor.call(this,c),this.auto_destroy(new b).on(window,"hashchange",function(){this.__used&&this._localRouteChanged()},this)},_getLocalRoute:function(){return window.location.pathname},_setLocalRoute:function(a){window.history.pushState({},document.title,a.route),this.__used=!0}}},{supported:function(){return window.history&&window.history.pushState}})}),a.define("module:LocationRouteBinder",["base:Router.RouteBinder"],function(a,b){return a.extend({scoped:b},{_getLocalRoute:function(){return window.location.pathname},_setLocalRoute:function(a){window.location.pathname=a.route}})}),a.define("module:DomExtend.DomExtension",["base:Class","base:Objs","base:Functions","base:Async","module:Dom","module:DomMutation.NodeRemoveObserver","module:DomMutation.NodeResizeObserver"],function(a,b,c,d,e,f,g,h){return a.extend({scoped:h},function(a){return{_domMethods:[],_domAttrs:{},constructor:function(h,i){a.constructor.call(this),this._element=e.unbox(h),this._element.domExtension=this,this._actualBB=null,this._idealBB=null,this._attrs=i||{},b.iter(this._domMethods,function(a){this._element[a]=c.as_method(this[a],this)},this),b.iter(["get","set"],function(a){this._element[a]=c.as_method(this[a],this)},this),d.eventually(function(){this._nodeRemoveObserver=this.auto_destroy(new f(this._element)),this._nodeRemoveObserver.on("node-removed",this.weakDestroy,this),this._nodeResizeObserver=this.auto_destroy(new g(this._element)),this._nodeResizeObserver.on("node-resized",function(){this.recomputeBB(),this._notify("resized")},this)},this),this._element.style.display&&"inline"!=this._element.style.display||(this._element.style.display="inline-block")},domEvent:function(a){e.triggerDomEvent(this._element,a)},readAttr:function(a){return a in this._element.attributes?this._element.attributes[a].value:a in this._element?this._element[a]:this._attrs[a]},hasAttr:function(a){return a in this._element.attributes||a in this._element||a in this._attrs},writeAttr:function(a,b){a in this._element.attributes?this._element.attributes[a].value=b:a in this._element?this._element[a]=b:this._attrs[a]=b},unsetAttr:function(a){delete this._element[a],this._element.removeAttribute(a),delete this._attrs[a]},get:function(a){var b=this._domAttrs[a]||{};if(!b.get)return this.readAttr(a);var d=c.callWithin(this,b.get);return this.writeAttr(a,d),d},set:function(a,b){this.writeAttr(a,b);var d=this._domAttrs[a]||{};d.set&&c.callWithin(this,d.set,b)},computeActualBB:function(a){var b=e.elementDimensions(this._element).width;if(b<a.width&&!this._element.style.width){this._element.style.width=a.width+"px",b=e.elementDimensions(this._element).width;for(var c=this._element;c!=document.body;)c=c.parentNode,b=Math.min(b,e.elementDimensions(c).width);this._element.style.width=null}return{width:b,height:b*a.height/a.width}},idealBB:function(){return null},recomputeBB:function(){var a=this.idealBB();if(a){var b=this.computeActualBB(a);this._idealBB=a,this._actualBB=b,this.setActualBB(b)}},setActualBB:function(a){}}})}),a.define("module:DomMutation.NodeRemoveObserver",["base:Classes.ConditionalInstance","base:Events.EventsMixin"],function(a,b,c){return a.extend({scoped:c},[b,function(a){return{constructor:function(b){a.constructor.call(this),this._node=b},_nodeRemoved:function(a){a===this._node&&this.trigger("node-removed")}}}])}),a.define("module:DomMutation.MutationObserverNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c);var d=this;this._observer=new window.MutationObserver(function(a){b.iter(a,function(a){for(var b=0;b<a.removedNodes.length;++b)d._nodeRemoved(a.removedNodes[b])})}),this._observer.observe(c.parentNode,{childList:!0})},destroy:function(){this._observer.disconnect(),a.destroy.call(this)}}},{supported:function(a){try{return!!window.MutationObserver}catch(b){return!1}}})}),a.define("module:DomMutation.DOMNodeRemovedNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","module:Info","module:Events"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(b){a.constructor.call(this,b),this.auto_destroy(new c).on(document,"DOMNodeRemoved",function(a){this._nodeRemoved(a.target)},this)}}},{supported:function(a){return!b.isInternetExplorer()||b.internetExplorerVersion()>=9}})}),a.define("module:DomMutation.TimerNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","base:Timers.Timer"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c),this._timer=new b({context:this,fire:this._fire,delay:100})},destroy:function(){this._timer.weakDestroy(),a.destroy.call(this)},_fire:function(){this._node.parentElement||(this._timer.stop(),this._nodeRemoved(this._node))}}},{supported:function(a){return!0}})}),
a.extend("module:DomMutation.NodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","module:DomMutation.MutationObserverNodeRemoveObserver","module:DomMutation.DOMNodeRemovedNodeRemoveObserver","module:DomMutation.TimerNodeRemoveObserver"],function(a,b,c,d){return a.register(b,3),a.register(c,2),a.register(d,1),{}}),a.define("module:DomMutation.NodeResizeObserver",["base:Class","base:Events.EventsMixin","module:Events"],function(a,b,c,d){return a.extend({scoped:d},[b,function(a){return{constructor:function(b){a.constructor.call(this),this.auto_destroy(new c).on(window,"resize",function(a){this._resized()},this)},_resized:function(){this.trigger("node-resized")}}}])}),a.define("module:DomMutation.NodeInsertObserver",["base:Classes.ConditionalInstance","base:Events.EventsMixin"],function(a,b,c){return a.extend({scoped:c},[b,function(a){return{_nodeInserted:function(a,b){if(b)for(var c=0;c<a.childNodes.length;++c)this._nodeInserted(a.childNodes[c],b);this._options.parent&&a.parentNode!==this._options.parent||this._options.root&&!this._options.root.contains(a)||this._options.filter&&!this._options.filter.call(this._options.context||this,a)||this.trigger("node-inserted",a)}}}])}),a.define("module:DomMutation.MutationObserverNodeInsertObserver",["module:DomMutation.NodeInsertObserver","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){c=c||{},a.constructor.call(this,c);var d=this;this._observer=new window.MutationObserver(function(a){b.iter(a,function(a){for(var b=0;b<a.addedNodes.length;++b)d._nodeInserted(a.addedNodes[b],!0)})}),this._observer.observe(this._options.root||this._options.parent||document.body,{childList:!0,subtree:!this._options.parent})},destroy:function(){this._observer.disconnect(),a.destroy.call(this)}}},{supported:function(a){try{return!!window.MutationObserver}catch(b){return!1}}})}),a.define("module:DomMutation.DOMNodeInsertedNodeInsertObserver",["module:DomMutation.NodeInsertObserver","module:Events"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){c=c||{},a.constructor.call(this,c),this.auto_destroy(new b).on(document,"DOMNodeInserted",function(a){this._nodeInserted(a.target,!0)},this)}}},{supported:function(a){return!0}})}),a.extend("module:DomMutation.NodeInsertObserver",["module:DomMutation.NodeInsertObserver","module:DomMutation.MutationObserverNodeInsertObserver","module:DomMutation.DOMNodeInsertedNodeInsertObserver"],function(a,b,c){return a.register(b,3),a.register(c,2),{}}),a.define("module:Dom",["base:Types","base:Objs","module:Info","base:Async"],function(a,b,c,d){var e={tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"]},f=["click","mousedown","mouseup","touchstart","touchend","keydown","keyup","keypress"],g=[],h=!1,i=function(){g.forEach(function(a){a.callback.call(a.context||this)}),g=[],h=!1,f.forEach(function(a){window.removeEventListener(a,i)})};return{ready:function(a,b){if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)d.eventually(a,b);else{var c,e=!1,f=null;c=function(){clearInterval(f),document.removeEventListener("DOMContentLoaded",c),window.removeEventListener("load",c),e||(e=!0,a.apply(b||this))},document.addEventListener("DOMContentLoaded",c),window.addEventListener("load",c),f=setInterval(function(){("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)&&c()},10)}},userInteraction:function(a,b){g.push({callback:a,context:b}),h||(h=!0,f.forEach(function(a){window.addEventListener(a,i)}))},isTabHidden:function(){return document.hidden||document.webkitHidden||document.mozHidden||document.msHidden},elementsByTemplate:function(a){a=a.trim();var d=c.isInternetExplorer()&&c.internetExplorerVersion()<9,f=[];b.iter(e,function(b,c){0===a.indexOf("<"+c)&&(f=b,d=!1)});var g=[f.map(function(a){return"<"+a+">"}).join(""),d?"<br/>":"",a,f.map(function(a){return"</"+a+">"}).join("")].join(""),h=document.createElement("div");h.innerHTML=g,f.forEach(function(){h=h.children[0]});for(var i=[],j=d?1:0;j<h.children.length;++j)i.push(h.children[j]);return d&&(i=i.filter(function(b){return!(0===b.tagName.indexOf("/")&&a.toLowerCase().indexOf("<"+b.tagName.toLowerCase())>=0)})),i},elementByTemplate:function(a){var b=this.elementsByTemplate(a);return b.length>0?b[0]:null},changeTag:function(a,b){for(var c=document.createElement(b),d=0;d<a.attributes.length;++d){var e=a.attributes[d];c.setAttribute(e.nodeName,"value"in e?e.value:e.nodeValue)}for(;a.firstChild;)c.appendChild(a.firstChild);return a.parentNode&&a.parentNode.replaceChild(c,a),c},traverseNext:function(a,b){return a=this.unbox(a),a.firstChild&&!b?a.firstChild:a.parentNode?a.nextSibling?a.nextSibling:this.traverseNext(a.parentNode,!0):null},splitNode:function(a,b,c){return b=b||0,c=c||(a.wholeText?a.wholeText.length:0),c<(a.wholeText?a.wholeText.length:0)&&a.splitText(c),b>0&&(a=a.splitText(b)),a},__FULLSCREEN_EVENTS:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],__FULLSCREEN_METHODS:["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","webkitEnterFullScreen"],__FULLSCREEN_ATTRS:["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],__FULLSCREEN_EXIT_METHODS:["exitFullscreen","mozCancelFullScreen","webkitExitFullscreen"],elementSupportsFullscreen:function(a){return a&&this.__FULLSCREEN_METHODS.some(function(b){return b in a})},elementEnterFullscreen:function(a){var b=!1;this.__FULLSCREEN_METHODS.forEach(function(c){!b&&c in a&&(a[c].call(a),b=!0)})},documentExitFullscreen:function(){this.__FULLSCREEN_EXIT_METHODS.forEach(function(a){document[a]&&document[a]()})},elementIsFullscreen:function(a){return this.__FULLSCREEN_ATTRS.some(function(b){return document[b]===a})},elementOnFullscreenChange:function(a,b,c){var d=this,e=function(){b.call(c||this,a,d.elementIsFullscreen(a))};return this.__FULLSCREEN_EVENTS.forEach(function(b){a.addEventListener(b,e,!1)}),e},elementOffFullscreenChange:function(a,b){this.__FULLSCREEN_EVENTS.forEach(function(c){a.removeEventListener(c,b,!1)})},entitiesToUnicode:function(b){return!b||!a.is_string(b)||b.indexOf("&")<0?b:b.split(">").map(function(a){return a.split("<").map(function(a){var b=document.createElement("span");return b.innerHTML=a,a=b.textContent||b.innerText,b.remove&&b.remove(),a}).join("<")}).join(">")},unbox:function(b){return a.is_string(b)&&(b=document.querySelector(b)),!b||b.nodeType?b:b.get(0)},triggerDomEvent:function(a,c,d,e){a=this.unbox(a),c=c.toLowerCase();var f="on"+c,g=null,h=!1;a[f]&&(g=a[f],a[f]=function(){h||(h=!0,g.apply(this,arguments))});try{var i;try{i=e?new CustomEvent(c,e):new Event(c)}catch(j){try{e?(i=document.createEvent("CustomEvent"),i.initCustomEvent(c,e.bubbles||!1,e.cancelable||!1,e.detail||!1)):(i=document.createEvent("Event"),i.initEvent(c,!1,!1))}catch(j){i=document.createEventObject(),i.type=c}}b.extend(i,d),a.dispatchEvent(i),g&&(h||g.call(a,i),a[f]=g)}catch(j){throw g&&(a[f]=g),j}},elementOffset:function(a){a=this.unbox(a);var b=0,c=0;if(a.getBoundingClientRect){var d=a.getBoundingClientRect();b=d.top,c=d.left-(document.body.getBoundingClientRect?document.body.getBoundingClientRect().left:0)}return docElem=document.documentElement,{top:b+(window.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:c+(window.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}},elementDimensions:function(a){a=this.unbox(a);var b,c,d;if(a&&window.getComputedStyle){try{b=window.getComputedStyle(a)}catch(f){}if(b&&(c=parseInt(b.width,10),d=parseInt(b.height,10),c&&d))return{width:c,height:d}}if(a&&a.currentStyle&&(b=a.currentStyle,c=a.clientWidth-parseInt(b.paddingLeft||0,10)-parseInt(b.paddingRight||0,10),d=a.clientHeight-parseInt(b.paddingTop||0,10)-parseInt(b.paddingTop||0,10),c&&d))return{width:c,height:d};if(a&&a.getBoundingClientRect){var e=a.getBoundingClientRect();return d=e.bottom-e.top,c=e.right-e.left,{width:c,height:d}}return{width:0,height:0}},childContainingElement:function(a,b){for(a=this.unbox(a),b=this.unbox(b);b.parentNode!=a;){if(b==document.body)return null;b=b.parentNode}return b},elementBoundingBox:function(a){var b=this.elementOffset(a),c=this.elementDimensions(a);return{left:b.left,top:b.top,right:b.left+c.width-1,bottom:b.top+c.height-1}},pointWithinElement:function(a,b,c){var d=this.elementBoundingBox(c);return d.left<=a&&a<=d.right&&d.top<=b&&b<=d.bottom},elementFromPoint:function(b,c,d,e){d=d||[],a.is_array(d)||(d=[d]);for(var f=[],g=0;g<d.length;++g)d[g]=this.unbox(d[g]),f.push(d[g].style.zIndex),d[g].style.zIndex=-1;var h=document.elementFromPoint(b-window.pageXOffset,c-window.pageYOffset);for(g=0;g<d.length;++g)d[g].style.zIndex=f[g];for(;h&&e&&h.parentNode!==e;)h=h.parentNode;return h},elementAddClass:function(a,b){a.className?this.elementHasClass(a,b)||(a.className=a.className+" "+b):a.className=b},elementHasClass:function(a,b){return a.className.split(" ").some(function(a){return a===b})},elementRemoveClass:function(a,b){a.className=a.className.split(" ").filter(function(a){return a!==b}).join(" ")},elementInsertBefore:function(a,b){b.parentNode.insertBefore(a,b)},elementInsertAfter:function(a,b){b.nextSibling?b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a)},elementInsertAt:function(a,b,c){c>=b.children.length?b.appendChild(a):b.insertBefore(a,b.children[Math.max(0,c)])},elementIndex:function(a){for(var b=0;a.previousElementSibling;)b++,a=a.previousElementSibling;return b},elementPrependChild:function(a,b){a.children.length>0?a.insertBefore(b,a.firstChild):a.appendChild(b)},elementFindClosestParent:function(a,b,c){for(var d=null;a;){if(a.className.indexOf(b)>-1){d=a;break}if(c&&a.className.indexOf(c)>-1)break;a=a.parentElement}return d},elementReplaceClasses:function(a,b,c){this.elementHasClass(a,b)&&(this.elementRemoveClass(a,b),this.elementAddClass(a,c))},isElementVisible:function(a,b){b=b||.8;var c=this.elementOffset(a),d=c.left,e=c.top,f=a.offsetWidth,g=a.offsetHeight,h=d+f,i=e+g;return Math.max(0,Math.min(f,window.pageXOffset+window.innerWidth-d,h-window.pageXOffset))*Math.max(0,Math.min(g,window.pageYOffset+window.innerHeight-e,i-window.pageYOffset))/(f*g)>b},keyboardUnfocus:function(){document.activeElement&&document.activeElement.blur()},passiveEventsSupported:function(){return c.isiOS()},containerStickyBottom:function(a){var b=a.scrollHeight,c=!1,d=new MutationObserver(function(){if(!c){c=!0;var d=a.scrollHeight,e=b;b=d,d>e&&(a.scrollTop=a.scrollTop+d-e),c=!1}});return d.observe(a,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),d}}}),a.define("module:Selection",["module:Dom"],function(a){return{selectNode:function(a,b){var c=null,d=null;window.getSelection?(c=window.getSelection(),c.removeAllRanges(),d=document.createRange()):document.selection&&(c=document.selection,d=c.createRange()),b?(d.setStart(a,b),d.setEnd(a,b),c.addRange(d)):(d.selectNode(a),c.addRange(d))},selectedHtml:function(){return window.getSelection?window.getSelection().toString():document.selection?document.selection.createRange().htmlText:""},selectionStartOffset:function(){return window.getSelection?window.getSelection().getRangeAt(0).startOffset:document.selection?document.selection.createRange().startOffset:null},selectionEndOffset:function(){return window.getSelection?window.getSelection().getRangeAt(0).endOffset:document.selection?document.selection.createRange().endOffset:null},selectionNonEmpty:function(){var a=this.selectionStart(),b=this.selectionEnd();return a&&b&&a&&b&&(a!=b||this.selectionStartOffset()!=this.selectionEndOffset())},selectionContained:function(a){return a.contains(this.selectionStart())&&a.contains(this.selectionEnd())},selectionNodes:function(){var b=[],c=this.selectionStart(),d=this.selectionEnd();b.push(c);for(var e=c;e!=d;)e=a.traverseNext(e),b.push(e);return b},selectionLeaves:function(){return this.selectionNodes().filter(function(a){return!a.hasChildNodes()})},selectionStartNode:function(){return window.getSelection?window.getSelection().getRangeAt(0).startContainer:document.selection?document.selection.createRange().startContainer:null},selectionAncestor:function(){return window.getSelection?window.getSelection().getRangeAt(0).commonAncestorContainer:document.selection?document.selection.createRange().parentElement():null},selectionStart:function(){return window.getSelection?window.getSelection().getRangeAt(0).startContainer:document.selection?document.selection.createRange().startContainer:null},selectionEnd:function(){return window.getSelection?window.getSelection().getRangeAt(0).endContainer:document.selection?document.selection.createRange().endContainer:null},selectionSplitOffsets:function(){var a=this.selectionStartOffset(),b=this.selectionEndOffset(),c=this.selectionStart(),d=this.selectionEnd(),e=c==d;b<d.wholeText.length&&(d.splitText(b),e&&(c=d)),a>0&&(c=c.splitText(a),e&&(d=c)),this.selectRange(c,d)},selectRange:function(a,b,c,d){var e=null,f=null;window.getSelection?(e=window.getSelection(),e.removeAllRanges(),f=document.createRange()):document.selection&&(e=document.selection,f=e.createRange()),f.setStart(a,c||0),f.setEnd(b,d||b.data.length),e.addRange(f)}}}),a.define("module:Upload.ChunkedFileUploader",["module:Upload.FileUploader","module:Upload.MultiUploader","module:Blobs","base:Promise","base:Objs","base:Tokens","base:Ajax.Support"],function(a,b,c,d,e,f,g,h){return a.extend({scoped:h},function(d){return{constructor:function(a){d.constructor.call(this,a),this._multiUploader=new b({uploadLimit:this._options.uploadLimit}),this._options.identifierParameter=this._options.identifierParameter||"identifier",this._options.chunks=e.extend({size:1e6,chunkNumberParameter:"chunknumber"},this._options.chunks),this._options.assembly=e.extend({fileNameParameter:"filename",totalSizeParameter:"totalsize",chunkNumberParameter:"chunknumber",fileTypeParameter:"filetype",ajaxOptions:null},this._options.assembly)},destroy:function(){this._multiUploader.destroy(),d.destroy.call(this)},reset:function(){d.reset.call(this),this._multiUploader.destroy(),this._multiUploader=new b({uploadLimit:this._options.uploadLimit})},__generateIdentifier:function(){return f.generate_token()},_upload:function(){var b=this.__generateIdentifier(),d=this._options.isBlob?this._options.source:this._options.source.files[0];c.loadFileIntoArrayBuffer(d).success(function(f){for(var h=0;h*this._options.chunks.size<d.size;){var i={};i[this._options.chunks.chunkNumberParameter]=h+1,i[this._options.identifierParameter]=b;var j=h*this._options.chunks.size,k=Math.min(this._options.chunks.size,d.size-j);this._multiUploader.addUploader(this._multiUploader.auto_destroy(a.create({url:this._options.chunks.url||this._options.url,source:c.createBlobByArrayBufferView(f,j,k,d.type),data:e.extend(i,this._options.data)}))),h++}this._multiUploader.on("error",function(a){this._errorCallback(a)},this).on("progress",function(a,b){this._progressCallback(a,b)},this).on("success",function(){var a={};a[this._options.identifierParameter]=b,a[this._options.assembly.fileNameParameter]=d.name||"blob",a[this._options.assembly.totalSizeParameter]=d.size,a[this._options.assembly.chunkNumberParameter]=h,a[this._options.assembly.fileTypeParameter]=d.type,g.execute(e.extend({method:this._options.method,uri:this._options.assembly.url||this._options.url,data:e.extend(a,this._options.data)},this._options.assembly.ajaxOptions)).success(function(){this._successCallback()},this).error(function(a){this._errorCallback(a)},this)},this),this._multiUploader.upload()},this)}}},{supported:function(a){return"undefined"!=typeof window.Blob&&"undefined"!=typeof FileReader&&"undefined"!=typeof DataView&&a.serverSupportsChunked}})}),a.define("module:Upload.CordovaFileUploader",["module:Upload.FileUploader","module:Info","base:Promise"],function(a,b,c,d){return a.extend({scoped:d},{_acquirePermission:function(){var a=c.create();if(b.isAndroid()){var d=cordova.plugins.permissions;d.checkPermission(d.READ_EXTERNAL_STORAGE,function(b){b.hasPermission?a.asyncSuccess(!0):d.requestPermission(d.READ_EXTERNAL_STORAGE,function(b){b.hasPermission?a.asyncSuccess(!0):a.asyncError("Access to storage was not granted")},function(){a.asyncError("Could not request storage permission")})},function(){a.asyncError("Could not check storage permission")})}else a.asyncSuccess(!0);return a},_upload:function(){return this._acquirePermission().mapSuccess(function(){var a=this,b=this._options.source.fullPath.split(":")[1],c=new window.FileUploadOptions;c.fileKey="file",c.fileName=b.substr(b.lastIndexOf("/")+1),c.mimeType=this._options.source.type,c.httpMethod=this._options.method,c.params=this._options.data,(new window.FileTransfer).upload(b,this._options.url,function(b){a._successCallback(b)},function(b){a._errorCallback(b)},c)},this)}},{supported:function(a){return!!navigator.device&&!!navigator.device.capture&&!!navigator.device.capture.captureVideo&&!!window.FileTransfer&&!!window.FileUploadOptions&&!a.isBlob&&"localURL"in a.source}})}),a.define("module:Upload.FileUploader",["base:Classes.ConditionalInstance","base:Events.EventsMixin","base:Objs","base:Types","base:Async","base:Promise"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},[b,function(a){return{constructor:function(b){a.constructor.call(this,b),this._state="idle"},_setState:function(a,b){this._state=a,this.trigger(a,b),this.trigger("state",a,b)},state:function(){return this._state},data:function(){return this._data},progress:function(){return{uploaded:this._uploaded,total:this._total}},reset:function(){"error"===this.state()&&(this._setState("idle"),delete this._data,delete this._uploaded,delete this._total)},upload:function(){return"idle"!==this.state()?this:(this._setState("uploading"),this.__upload(),this)},__upload:function(){this._options.resilience--,this._upload()},_upload:function(){},_progressCallback:function(a,b){"uploading"===this.state()&&(this._uploaded=a,this._total=b,this.trigger("progress",a,b))},_successCallback:function(a){"uploading"===this.state()&&(this._data=a,this._setState("success",a))},_errorCallback:function(a){if("uploading"===this.state()){try{a.data&&(a=a.data()),d.is_string(a)&&(a=JSON.parse(a))}catch(b){}if(this._options.resilience>0&&(!this._options.resilienceCheck||this._options.resilienceCheck(a)))return void e.eventually(function(){this.__upload()},this,this._options.resilience_delay);if(!this._options.essential)return void this._successCallback({});this._data=a,this._setState("error",a)}},uploadedBytes:function(){return this._uploaded},totalBytes:function(){return this._total?this._total:this._options.source?!this._options.isBlob&&this._options.source.files&&this._options.source.files[0]?this._options.source.files[0].size:this._options.source.size||0:0}}}],{_initializeOptions:function(a){return a=a||{},c.extend({method:"POST",serverSupportChunked:!1,serverSupportPostMessage:!1,isBlob:"undefined"!=typeof window.Blob&&a.source instanceof window.Blob,resilience:1,resilience_delay:1e3,essential:!0,data:{}},a)}})}),a.define("module:Upload.CustomUploader",["module:Upload.FileUploader"],function(a,b){return a.extend({scoped:b},{_upload:function(){this.trigger("upload",this._options)},progressCallback:function(a,b){this._progressCallback(a,b)},successCallback:function(a){this._successCallback(a)},errorCallback:function(a){this._errorCallback(a)}})}),a.extend("module:Upload.FileUploader",["module:Upload.FileUploader","module:Upload.FormDataFileUploader","module:Upload.FormIframeFileUploader","module:Upload.CordovaFileUploader","module:Upload.ChunkedFileUploader"],function(a,b,c,d,e){return a.register(b,2),a.register(c,1),a.register(d,4),a.register(e,5),{}}),a.define("module:Upload.FormDataFileUploader",["module:Upload.FileUploader","module:Info","base:Ajax.Support","base:Objs"],function(a,b,c,d,e){return a.extend({scoped:e},{_upload:function(){var a=d.clone(this._options.data||{},1);return a.file=this._options.isBlob?this._options.source:this._options.source.files[0],c.execute({method:this._options.method,uri:this._options.url,decodeType:"text",data:a},this._progressCallback,this).success(this._successCallback,this).error(this._errorCallback,this)}},{supported:function(a){if(b.isInternetExplorer()&&b.internetExplorerVersion()<=9)return!1;try{new window.FormData}catch(c){return!1}return!0}})}),a.define("module:Upload.FormIframeFileUploader",["module:Upload.FileUploader","base:Net.Uri","base:Objs","base:Async"],function(a,b,c,d,e){return a.extend({scoped:e},{_upload:function(){var a=this,e=document.createElement("iframe"),f="upload-iframe-"+this.cid();e.id=f,e.name=f,e.style.display="none";var g=document.createElement("form");g.method=this._options.method,g.target=f,g.style.display="none",document.body.appendChild(e),document.body.appendChild(g);var h=this._options.source.parent;g.appendChild(this._options.source),this._options.source.name||(this._options.source.name="file"),c.iter(this._options.data,function(a,b){var c=document.createElement("input");c.type="hidden",c.name=b,c.value=a,g.appendChild(c)},this);var i=!("postMessage"in window),j=null,k=function(a){j(a.data)};e.onerror=function(){i&&(window.postMessage=null),window.removeEventListener("message",k,!1),h&&h.appendChild(a._options.source),document.body.removeChild(g),document.body.removeChild(e),a._errorCallback()};var l=this._options.serverPostMessageKey||"_postmessage",m=this._options.serverPostMessageIdKey||"_postmessageid",n=this.cid(),o=this._options.serverSupportPostMessageId,p={};p[l]=!0,o&&(p[m]=n),g.action=b.appendUriParams(this._options.url,p),g.encoding=g.enctype="multipart/form-data",j=function(b){try{var c=JSON.parse(b);if(o&&c[m]!==n)return;i&&(window.postMessage=null),h&&h.appendChild(a._options.source),document.body.removeChild(g),document.body.removeChild(e),a._successCallback(c),d.eventually(function(){window.removeEventListener("message",k,!1)})}catch(f){}},window.addEventListener("message",k,!1),i&&(window.postMessage=j),g.submit()}},{supported:function(a){return!a.isBlob&&a.serverSupportPostMessage}})}),a.define("module:Upload.MultiUploader",["module:Upload.FileUploader","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(b){a.constructor.call(this,b),this._uploaders={},this._uploadLimit=this._options.uploadLimit||5,this._uploadingCount=0,this._end=!this._options.manualEnd},end:function(){this._end=!0,this._updateState()},addUploader:function(a){return this._uploaders[a.cid()]=a,a.on("state",this._updateState,this),a.on("progress",this._updateProgress,this),"uploading"===this.state()&&("error"===a.state()&&a.reset(),"idle"===a.state()&&this._uploadingCount<this._uploadLimit&&(this._uploadingCount++,a.upload())),this},_upload:function(){b.iter(this._uploaders,function(a){"error"===a.state()&&a.reset(),"idle"===a.state()&&this._uploadingCount<this._uploadLimit&&(this._uploadingCount++,a.upload())},this),this._updateState()},_updateState:function(){if("uploading"===this.state()){this._uploadingCount=0;var a=!1,c=0;if(b.iter(this._uploaders,function(b){switch(b.state()){case"uploading":this._uploadingCount++;break;case"error":a=!0;break;case"idle":c++}},this),c>0&&this._uploadingCount<this._uploadLimit&&b.iter(this._uploaders,function(a){this._uploadingCount<this._uploadLimit&&"idle"===a.state()&&(a.upload(),c--,this._uploadingCount++)},this),!(this._uploadingCount>0)&&this._end){var d=[];b.iter(this._uploaders,function(b){var c=a&&"error"===b.state()||!a&&"success"===b.state()?b.data():undefined;d.push(c)},this),a>0?this._errorCallback(d):this._successCallback(d)}}},_updateProgress:function(){"uploading"===this.state()&&this._progressCallback(this.uploadedBytes(),this.totalBytes())},uploadedBytes:function(){var a=0;return b.iter(this._uploaders,function(b){a+=b.uploadedBytes()},this),a},totalBytes:function(){var a=0;return b.iter(this._uploaders,function(b){a+=b.totalBytes()},this),a}}})}),a.define("module:Upload.StreamingFileUploader",["module:Upload.FileUploader","module:Upload.MultiUploader","base:Promise","base:Objs","base:Tokens","base:Ajax.Support"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},function(c){return{constructor:function(a){c.constructor.call(this,a),this._multiUploader=new b({uploadLimit:this._options.uploadLimit,manualEnd:!0}),this._options.identifierParameter=this._options.identifierParameter||"identifier",this._options.chunks=d.extend({chunkNumberParameter:"chunknumber"},this._options.chunks),this._options.assembly=d.extend({totalSizeParameter:"totalsize",chunkNumberParameter:"chunknumber",ajaxOptions:null},this._options.assembly),this._identifier=this.__generateIdentifier(),this._chunkNumber=0,this._totalSize=0},destroy:function(){this._multiUploader.destroy(),c.destroy.call(this)},reset:function(){c.reset.call(this),this._multiUploader.destroy(),this._multiUploader=new b({uploadLimit:this._options.uploadLimit}),this._identifier=this.__generateIdentifier(),this._chunkNumber=0,this._totalSize=0},__generateIdentifier:function(){return e.generate_token()},addChunk:function(b){var c={};c[this._options.chunks.chunkNumberParameter]=this._chunkNumber+1,c[this._options.identifierParameter]=this._identifier,this._multiUploader.addUploader(this._multiUploader.auto_destroy(a.create({url:this._options.chunks.url||this._options.url,source:b,data:d.extend(c,this._options.data)}))),this._chunkNumber++,this._totalSize+=b.size},end:function(){this._multiUploader.end()},_upload:function(){this._multiUploader.on("error",function(a){this._errorCallback(a)},this).on("progress",function(a,b){this._progressCallback(a,b)},this).on("success",function(){var a={};a[this._options.identifierParameter]=this._identifier,a[this._options.assembly.totalSizeParameter]=this._totalSize,a[this._options.assembly.chunkNumberParameter]=this._chunkNumber,f.execute(d.extend({method:this._options.method,uri:this._options.assembly.url||this._options.url,data:d.extend(a,this._options.data)},this._options.assembly.ajaxOptions)).success(function(){this._successCallback()},this).error(function(a){this._errorCallback(a)},this)},this),this._multiUploader.upload()}}},{supported:function(a){return"undefined"!=typeof window.Blob&&a.serverSupportsChunked}})})}).call(Scoped);