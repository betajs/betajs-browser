/*!
betajs-browser - v1.0.41 - 2016-10-12
Copyright (c) Oliver Friedmann
Apache-2.0 Software License.
*/
(function(){var a=this.subScope();a.binding("module","global:BetaJS.Browser"),a.binding("base","global:BetaJS"),a.binding("jquery","global:jQuery"),a.binding("resumablejs","global:Resumable"),a.define("module:",function(){return{guid:"02450b15-9bbf-4be2-b8f6-b483bc015d06",version:"93.1476330251439"}}),a.assumeVersion("base:version",531),a.define("module:Ajax.IframePostmessageAjax",["base:Ajax.Support","base:Net.Uri","base:Net.HttpHeader","base:Promise","base:Types","base:Ajax.RequestException","base:Tokens","base:Objs"],function(a,b,c,d,e,f,g,h){var i=1,j={supports:function(a){return!!a.postmessage},execute:function(c){var f="postmessage_"+g.generate_token()+"_"+i++,j=h.objectBy(c.postmessage,f);j=h.extend(j,c.query);var k=b.appendUriParams(c.uri,j),l=document.createElement("iframe");l.id=f,l.name=f,l.style.display="none";var m=document.createElement("form");m.method=c.method,m.target=f,m.action=k,m.style.display="none";var n=d.create();document.body.appendChild(l),document.body.appendChild(m),h.iter(c.data,function(a,b){var c=document.createElement("input");c.type="hidden",c.name=b,c.value=e.is_array(a)||e.is_object(a)?JSON.stringify(a):a,m.appendChild(c)},this);var o=!("postMessage"in window),p=null,q=function(a){p(a.data)};return p=function(b){"string"==typeof b&&(b=JSON.parse(b)),f in b&&(b=b[f],o&&(window.postMessage=null),window.removeEventListener("message",q),document.body.removeChild(m),document.body.removeChild(l),a.promiseReturnData(n,c,b,"json"))},l.onerror=function(){o&&(window.postMessage=null),window.removeEventListener("message",q),document.body.removeChild(m),document.body.removeChild(l)},window.addEventListener("message",q),o&&(window.postMessage=p),m.submit(),n}};return a.register(j,4),j}),a.define("module:Ajax.JsonpScriptAjax",["base:Ajax.Support","base:Net.Uri","base:Net.HttpHeader","base:Promise","base:Types","base:Ajax.RequestException","base:Tokens","base:Objs","base:Async","module:Info"],function(a,b,c,d,e,f,g,h,i,j){var k=1,l={supports:function(a){return a.jsonp?"GET"===a.method:!1},execute:function(e){var f="jsonp_"+g.generate_token()+"_"+k++,l=h.objectBy(e.jsonp,f);l=h.extend(l,e.query),l=h.extend(l,e.data);var m=b.appendUriParams(e.uri,l),n=!1;window[f]=function(b){if(!n){n=!0;try{delete window[f]}catch(c){window[f]=void 0}a.promiseReturnData(o,e,b,"json")}};var o=d.create(),p=document.getElementsByTagName("head")[0],q=document.createElement("script"),r=!1;return q.onerror=function(){n||(n=!0,a.promiseRequestException(o,c.HTTP_STATUS_BAD_REQUEST,c.format(c.HTTP_STATUS_BAD_REQUEST),null,"json"))},q.onload=q.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,q.onload=q.onreadystatechange=null,p.removeChild(q),j.isInternetExplorer()&&j.internetExplorerVersion()<9&&i.eventually(function(){n||q.onerror()}))},q.src=m,p.appendChild(q),o}};return a.register(l,5),l}),a.define("module:Ajax.XDomainRequestAjax",["base:Ajax.Support","base:Net.Uri","base:Net.HttpHeader","base:Promise","base:Types","base:Ajax.RequestException","module:Info","base:Async"],function(a,b,c,d,e,f,g,h){var i={supports:function(a){return window.XDomainRequest?a.forceJsonp||a.forcePostmessage?!1:a.isCorsRequest?g.isInternetExplorer()&&!(g.internetExplorerVersion()>9):!1:!1},execute:function(f){var g=b.appendUriParams(f.uri,f.query||{});"GET"===f.method&&(g=b.appendUriParams(g,f.data||{}));var i=d.create(),j=new XDomainRequest;return j.onload=function(){a.promiseReturnData(i,f,j.responseText,"json")},j.ontimeout=function(){a.promiseRequestException(i,c.HTTP_STATUS_GATEWAY_TIMEOUT,c.format(c.HTTP_STATUS_GATEWAY_TIMEOUT),null,"json")},j.onerror=function(){a.promiseRequestException(i,c.HTTP_STATUS_BAD_REQUEST,c.format(c.HTTP_STATUS_BAD_REQUEST),null,"json")},j.open(f.method,g),h.eventually(function(){"GET"===f.method||e.is_empty(f.data)?j.send():"json"===f.contentType?j.send(JSON.stringify(f.data)):j.send(b.encodeUriParams(f.data,void 0,!0))},this),i}};return a.register(i,9),i}),a.define("module:Ajax.XmlHttpRequestAjax",["base:Ajax.Support","base:Net.Uri","base:Net.HttpHeader","base:Promise","base:Types","base:Ajax.RequestException","module:Info"],function(a,b,c,d,e,f,g){var h={supports:function(a){return window.XMLHttpRequest?a.forceJsonp||a.forcePostmessage?!1:!(g.isInternetExplorer()&&g.internetExplorerVersion()<10&&a.isCorsRequest):!1},execute:function(f){var g=b.appendUriParams(f.uri,f.query||{});"GET"===f.method&&(g=b.appendUriParams(g,f.data||{}));var h=d.create(),i=new XMLHttpRequest;return i.onreadystatechange=function(){4===i.readyState&&(c.isSuccessStatus(i.status)?a.promiseReturnData(h,f,i.responseText,"json"):a.promiseRequestException(h,i.status,i.statusText,i.responseText,"json"))},i.open(f.method,g,!0),f.corscreds&&(i.withCredentials=!0),"GET"===f.method||e.is_empty(f.data)?i.send():"json"===f.contentType?(f.sendContentType&&i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(JSON.stringify(f.data))):(f.sendContentType&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(b.encodeUriParams(f.data,void 0,!0))),h}};return a.register(h,10),h}),a.define("module:Apps",["base:Time","base:Async","base:Promise","module:Info","module:Loader"],function(a,b,c,d,e){return{STATE_INCOMPATIBLE_DEVICE:1,STATE_APP_LAUNCHED:2,STATE_APP_INSTALLED_AND_LAUNCHED:3,STATE_APP_NOT_INSTALLED:4,STATE_UNKNOWN:5,launch:function(e){var f=c.create(),g=a.now();return d.isiOS()&&e.ios?(b.eventually(function(){a.now()-g>3e3?f.asyncSuccess(this.STATE_APP_LAUNCHED):(g=a.now(),b.eventually(function(){a.now()-g>3e3?f.asyncSuccess(this.STATE_APP_INSTALLED_AND_LAUNCHED):f.asyncError(this.STATE_APP_NOT_INSTALLED)},this,2500),document.location=e.ios.install)},this,2500),document.location=e.ios.launch):f.asyncError(this.STATE_INCOMPATIBLE_DEVICE),f},appStoreLink:function(a){return"itms://itunes.apple.com/us/app/"+a+"?mt=8&uo=4"},playStoreLink:function(a){return"http://play.google.com/store/apps/details?id=<"+a+">"},iOSAppURL:function(a,b){return a+"://"+b},androidAppUrl:function(a,b){return a+"://"+b},googleIntent:function(a,b,c){return"intent://"+b+";scheme="+a+";package="+c+";end"}}}),a.define("module:Cookies",["base:Objs","base:Types"],function(a,b){return{getCookielikeValue:function(a,b){return decodeURIComponent(a.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},get:function(a){return this.getCookielikeValue(document.cookie,a)},createCookielikeValue:function(c,d,e,f,g,h){if(!c||/^(?:expires|max\-age|path|domain|secure)$/i.test(c))return null;var i=[];return i.push([encodeURIComponent(c),encodeURIComponent(d)]),e&&(e===1/0?i.push(["expires","Fri, 31 Dec 9999 23:59:59 GMT"]):"number"==typeof e?i.push(["max-age",e]):"object"==typeof e?i.push(["expires",e.toUTCString()]):i.push(["expires",e])),g&&i.push(["domain",g]),f&&i.push(["path",f]),h&&i.push("secure"),a.map(i,function(a){return b.is_array(a)?a.join("="):a}).join("; ")},set:function(a,b,c,d,e,f){document.cookie=this.createCookielikeValue(a,b,c,d,e,f)},removeCookielikeValue:function(a,b,c,d){return this.createCookielikeValue(a,b,new Date(0),c,d)},remove:function(a,b,c,d){document.cookie=this.removeCookielikeValue(a,b,c,d)},hasCookielikeValue:function(a,b){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(a)},has:function(a){return this.hasCookielikeValue(document.cookie,a)},keysCookielike:function(b){var c=b.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);return a.map(c,decodeURIComponent)},keys:function(){return this.keysCookielike(document.cookie)}}}),a.define("module:FlashDetect",["base:Class"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(){if(a.constructor.call(this),this.__version=null,navigator.plugins&&navigator.plugins.length>0){var b="application/x-shockwave-flash",c=navigator.mimeTypes;c&&c[b]&&c[b].enabledPlugin&&c[b].enabledPlugin.description&&(this.__version=this.parseVersion(c[b].enabledPlugin.description))}else if(-1==navigator.appVersion.indexOf("Mac")&&"execScript"in window)for(var d=0;d<this.__activeXDetectRules.length;d++)try{var e=new ActiveXObject(this.__activeXDetectRules[d].name),f=this.__activeXDetectRules[d].version(e);if(f){this.__version=this.parseActiveXVersion(f);break}}catch(g){}},parseVersion:function(a){var b=a.split(/ +/),c=b[2].split(/\./),d=b[3];return{raw:a,major:parseInt(c[0],10),minor:parseInt(c[1],10),revisionStr:d,revision:parseInt(d.replace(/[a-zA-Z]/g,""),10)}},parseActiveXVersion:function(a){var b=a.split(",");return{raw:a,major:parseInt(b[0].split(" ")[1],10),minor:parseInt(b[1],10),revision:parseInt(b[2],10),revisionStr:b[2]}},version:function(){return this.__version},installed:function(){return null!==this.__version},supported:function(){var a=navigator.userAgent;return this.installed()||!(-1!=a.indexOf("iPhone")||-1!=a.indexOf("iPod")||-1!=a.indexOf("iPad"))},majorAtLeast:function(a){return this.installed()&&this.version().major>=a},minorAtLeast:function(a){return this.installed()&&this.version().minor>=a},revisionAtLeast:function(a){return this.installed()&&this.version().revision>=a},versionAtLeast:function(a){if(!this.installed())return!1;for(var b=[this.version().major,this.version().minor,this.version().revision],c=Math.min(b.length,arguments.length),d=0;c>d;d++)if(b[d]!=arguments[d])return b[d]>arguments[d];return!0},__activeXDetectRules:[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(a){try{return a.GetVariable("$version")}catch(b){return null}}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(a){try{a.AllowScriptAccess="always";try{return a.GetVariable("$version")}catch(b){return null}}catch(b){return"6,0,21"}}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(a){try{return a.GetVariable("$version")}catch(b){return null}}}]}})}),a.define("module:FlashHelper",["base:Time","base:Objs","base:Types","base:Net.Uri","base:Ids","module:Info","jquery:"],function(a,b,c,d,e,f,g){return{getFlashObject:function(a){var b=g(a).find("embed").get(0);if(f.isInternetExplorer()&&f.internetExplorerVersion()<=10&&(b=null),b||(b=g(a).find("object").get(0)),!b)for(var c=g("object"),d=0;d<c.length;++d)g(c[d]).closest(a).length>0&&(b=g(c[d]).get(0));return b},embedTemplate:function(f){f=f||{};var g=[];g.push({objectKey:"classid",value:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}),g.push({objectKey:"codebase",value:"http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"}),g.push({embedKey:"align",value:"middle"}),g.push({embedKey:"play",value:"true"}),g.push({embedKey:"loop",value:"false"}),g.push({embedKey:"type",value:"application/x-shockwave-flash"}),g.push({embedKey:"pluginspage",value:"http://www.adobe.com/go/getflashplayer"}),g.push({objectParam:"quality",embedKey:"quality",value:"high"}),g.push({objectParam:"allowScriptAccess",embedKey:"allowScriptAccess",value:"always"}),g.push({objectParam:"wmode",embedKey:"wmode",value:"opaque"}),g.push({objectParam:"movie",embedKey:"src",value:f.flashFile+(f.forceReload?"?"+a.now():"")}),f.width&&g.push({objectKey:"width",embedKey:"width",value:f.width}),f.height&&g.push({objectKey:"height",embedKey:"height",value:f.height}),f.bgcolor&&g.push({objectParam:"bgcolor",embedKey:"bgcolor",value:f.bgcolor}),f.FlashVars&&g.push({objectParam:"FlashVars",embedKey:"FlashVars",value:c.is_object(f.FlashVars)?d.encodeUriParams(f.FlashVars):f.FlashVars}),g.push({objectKey:"id",value:f.objectId||e.uniqueId("flash")});var h=[],i=[],j=[];return b.iter(g,function(a){a.objectKey&&h.push(a.objectKey+'="'+a.value+'"'),a.embedKey&&j.push(a.embedKey+'="'+a.value+'"'),a.objectParam&&i.push('<param name="'+a.objectParam+'" value="'+a.value+'" />')},this),"<object "+h.join(" ")+">"+i.join(" ")+"<embed "+j.join(" ")+"></embed></object>"},embedFlashObject:function(a,b){b=b||{};var c=g(a);if(b.parentBgcolor)try{var d=c.css("background-color");if(d.indexOf("rgb")>=0){var e=d.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),f=function(a){return("0"+parseInt(a,10).toString(16)).slice(-2)};e&&e.length>3&&(d="#"+f(e[1])+f(e[2])+f(e[3]))}b.bgcolor=d}catch(h){}if(b.fixHalfPixels)try{var i=c.offset();i.top%1!==0&&c.css("margin-top",Math.round(i.top)-i.top+"px"),i.left%1!==0&&c.css("margin-left",Math.round(i.left)-i.left+"px")}catch(h){}return c.html(this.embedTemplate(b)),this.getFlashObject(a)}}}),a.define("module:Hotkeys",["base:Objs","jquery:"],function(a,b){return{SHIFT_NUMS:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},SPECIAL_KEYS:{esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},MODIFIERS:["ctrl","alt","shift","meta"],keyCodeToCharacter:function(a){return 188==a?",":190==a?".":String.fromCharCode(a).toLowerCase()},register:function(c,d,e,f){var g=this;f=a.extend({type:"keyup",propagate:!1,disable_in_input:!1,target:document,keycode:!1},f),f.target=b(f.target);var h=c.toLowerCase().split("+"),i=function(b){if(f.disable_in_input){var c=b.target||b.srcElement||null;if(c&&3==c.nodeType&&(c=c.parentNode),c&&("INPUT"==c.tagName||"TEXTAREA"==c.tagName))return}var i=b.keyCode||b.which||0,j=g.keyCodeToCharacter(i),k=0,l={};a.iter(g.MODIFIERS,function(a){l[a]={pressed:b[a+"Key"],wanted:!1}},this),a.iter(h,function(a){a in l?(l[a].wanted=!0,k++):a.length>1?g.SPECIAL_KEYS[a]==i&&k++:f.keycode?f.keycode==i&&k++:(j==a||b.shiftKey&&g.SHIFT_NUMS[j]==a)&&k++},this),k==h.length&&a.all(l,function(a){return a.wanted==a.pressed})&&(d.apply(e||this),f.propagate||b.preventDefault())};return f.target.on(f.type,i),{target:f.target,type:f.type,func:i}},unregister:function(a){a.target.off(a.type,a.func)}}}),a.define("module:Info",["base:Objs","module:FlashDetect"],function(a,b){return{__navigator:null,getNavigator:function(){return this.__navigator||(this.__navigator={appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,platform:navigator.platform,userAgent:navigator.userAgent,window_chrome:"chrome"in window,window_opera:"opera"in window,language:navigator.language||navigator.userLanguage||""}),this.__navigator},__cache:{},__cached:function(a,b){if(!(a in this.__cache)){var c=this.getNavigator();this.__cache[a]=b.call(this,c,c.userAgent,c.userAgent.toLowerCase())}return this.__cache[a]},setNavigator:function(a){this.__navigator=a,this.__cache={}},language:function(){return this.__cached("language",function(a){return a.language})},flash:function(){return this.__cached("flash",function(){return new b})},isiOS:function(){return this.__cached("isiOS",function(a,b){return this.isInternetExplorer()||this.isIEMobile()?!1:-1!=b.indexOf("iPhone")||-1!=b.indexOf("iPod")||-1!=b.indexOf("iPad")})},isEdge:function(){return this.__cached("isEdge",function(a,b){return-1!=b.indexOf("Edge")})},isCordova:function(){return this.__cached("isCordova",function(){return!!window.cordova||!!window._cordovaNative||0===document.location.href.indexOf("file:///android_asset/www")||0===document.location.href.indexOf("file:///var/mobile/Containers/Bundle/Application")})},isLocalCordova:function(){return this.__cached("isLocalCordova",function(){return this.isCordova()&&0!==document.location.href.indexOf("http")})},isChrome:function(){return this.__cached("isChrome",function(a,b){return(a.window_chrome||-1!=b.indexOf("CriOS"))&&!this.isOpera()&&!this.isEdge()})},isChromium:function(){return this.__cached("isChromium",function(a,b,c){return!this.isChrome()&&this.isAndroid()&&c.indexOf("linux")>=0})},isChromiumBased:function(){return this.__cached("isChromiumBased",function(){return this.isChrome()||this.isChromium()})},isOpera:function(){return this.__cached("isOpera",function(a,b){return a.window_opera||b.indexOf(" OPR/")>=0||b.indexOf("OPiOS")>=0||b.indexOf("Opera")>=0})},isAndroid:function(){return this.__cached("isAndroid",function(a,b,c){return-1!=c.indexOf("android")})},isWebOS:function(){return this.__cached("isWebOS",function(a,b,c){return-1!=c.indexOf("webos")})},isWindowsPhone:function(){return this.__cached("isWindowsPhone",function(a,b,c){return-1!=c.indexOf("windows phone")})},isBlackberry:function(){return this.__cached("isBlackberry",function(a,b,c){return-1!=c.indexOf("blackberry")})},iOSversion:function(){return this.__cached("iOSversion",function(a){if(!this.isiOS())return!1;var b=a.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return{major:parseInt(b[1],10),minor:parseInt(b[2],10),revision:parseInt(b[3]||0,10)}})},isMobile:function(){return this.__cached("isMobile",function(){return this.isiOS()||this.isAndroid()||this.isWebOS()||this.isWindowsPhone()||this.isBlackberry()})},isDesktop:function(){return this.__cached("isDesktop",function(){return!this.isMobile()})},isInternetExplorer:function(){return this.__cached("isInternetExplorer",function(){return!this.isIEMobile()&&null!==this.internetExplorerVersion()})},isIEMobile:function(){return this.__cached("isIEMobile",function(a,b,c){return c.indexOf("iemobile")>=0})},isFirefox:function(){return this.__cached("isFirefox",function(a,b,c){return-1!=c.indexOf("firefox")||-1!=c.indexOf("fxios")})},isSafari:function(){return this.__cached("isSafari",function(a,b,c){return!(this.isChrome()||this.isOpera()||this.isEdge()||this.isFirefox()||-1==c.indexOf("safari")||this.isAndroid())})},isWindows:function(){return this.__cached("isWindows",function(a){return-1!=a.appVersion.toLowerCase().indexOf("win")&&!this.isWindowsPhone()})},isMacOS:function(){return this.__cached("isMacOS",function(a){return!this.isiOS()&&-1!=a.appVersion.toLowerCase().indexOf("mac")})},isUnix:function(){return this.__cached("isUnix",function(a){return-1!=a.appVersion.toLowerCase().indexOf("x11")})},isLinux:function(){return this.__cached("isLinux",function(a){return!this.isAndroid()&&-1!=a.appVersion.toLowerCase().indexOf("linux")})},internetExplorerVersion:function(){return this.__cached("internetExplorerVersion",function(a,b){if("Microsoft Internet Explorer"==a.appName){var c=new RegExp("MSIE ([0-9]+)"),d=c.exec(b);if(d)return d[1]}else if("Netscape"==a.appName){var e=new RegExp("Trident/.*rv:([0-9]+)"),f=e.exec(a.userAgent);if(f)return parseFloat(f[1])}return null})},chromeVersion:function(){return this.__cached("chromeVersion",function(a,b){var c=/Chrome\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},operaVersion:function(){return this.__cached("operaVersion",function(a,b){var c=/OPR\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},safariVersion:function(){return this.__cached("safariVersion",function(a,b){var c=/Version\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},firefoxVersion:function(){return this.__cached("firefoxVersion",function(a,b){var c=/Firefox\/(\d+\.\d+)/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},inIframe:function(){try{return window.self!==window.top}catch(a){return!0}},__devicesMap:{mobile:{format:"Mobile",check:function(){return this.isMobile()}},desktop:{format:"Desktop",check:function(){return this.isDesktop()}}},__obtainMatch:function(b,c){var d=null;return a.iter(b,function(b,c){if(b.check.apply(this)){if(d)return d=null,!1;d=a.clone(b,1),delete d.check,d.key=c}},this),d||c},getDevice:function(){return this.__cached("getDevice",function(){return this.__obtainMatch(this.__devicesMap,{key:"unknown",format:"Unknown Device"})})},formatDevice:function(){return this.getDevice().format},__osMap:{macosx:{format:"Mac OS-X",check:function(){return this.isMacOS()}},windows:{format:"Windows",check:function(){return this.isWindows()}},unix:{format:"Unix",check:function(){return this.isUnix()}},linux:{format:"Linux",check:function(){return this.isLinux()}},ios:{format:"iOS",check:function(){return this.isiOS()},version:function(){return this.iOSversion().major+"."+this.iOSversion().minor+"."+this.iOSversion().revision}},android:{format:"Android",check:function(){return this.isAndroid()}},webos:{format:"WebOS",check:function(){return this.isWebOS()}},windowsphone:{format:"Windows Phone",check:function(){return this.isWindowsPhone()}},blackberry:{format:"Blackberry",check:function(){return this.isBlackberry()}}},getOS:function(){return this.__cached("getOS",function(){return this.__obtainMatch(this.__osMap,{key:"unknown",format:"Unknown Operating System"})})},formatOS:function(){return this.getOS().format},formatOSVersion:function(){return this.getOS().version?this.getOS().version.apply(this):""},__browserMap:{chrome:{format:"Chrome",check:function(){return this.isChrome()},version:function(){return this.chromeVersion()}},chromium:{format:"Chromium",check:function(){return this.isChromium()}},opera:{format:"Opera",check:function(){return this.isOpera()},version:function(){return this.operaVersion()}},internetexplorer:{format:"Internet Explorer",check:function(){return this.isInternetExplorer()},version:function(){return this.internetExplorerVersion()}},firefox:{format:"Firefox",check:function(){return this.isFirefox()},version:function(){return this.firefoxVersion()}},safari:{format:"Safari",check:function(){return this.isSafari()},version:function(){return this.safariVersion()}},webos:{format:"WebOS",check:function(){return this.isWebOS()}},blackberry:{format:"Blackberry",check:function(){return this.isBlackberry()}},edge:{format:"Edge",check:function(){return this.isEdge()}},iemobile:{format:"IE Mobile",check:function(){return this.isIEMobile()}}},getBrowser:function(){return this.__cached("getBrowser",function(){return this.__obtainMatch(this.__browserMap,{key:"unknown",format:"Unknown Browser"})})},formatBrowser:function(){return this.getBrowser().format},formatBrowserVersion:function(){return this.getBrowser().version?this.getBrowser().version.apply(this):""},formatFlash:function(){return this.flash().installed()?"Flash "+this.flash().version().raw:this.flash().supported()?"Flash not installed but supported":"Flash not supported"}}}),a.define("module:Loader",["jquery:"],function(a){return{loadScript:function(a,b,c){var d=!1,e=document.getElementsByTagName("head")[0],f=document.createElement("script");f.src=a,f.onload=f.onreadystatechange=function(){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,f.onload=f.onreadystatechange=null,b&&b.call(c||this,a))},e.appendChild(f)},loadStyles:function(a,b,c){var d=!1,e=document.getElementsByTagName("head")[0],f=document.createElement("link");f.rel="stylesheet",f.href=a,f.onload=f.onreadystatechange=function(){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,f.onload=f.onreadystatechange=null,b&&b.call(c||this,a))},e.appendChild(f)},inlineStyles:function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("style");return c.textContent=a,b.appendChild(c),c},loadHtml:function(b,c,d){a.ajax({url:b,dataType:"html"}).done(function(a){c.call(d||this,a,b)})},findScript:function(a){for(var b=0;b<document.scripts.length;++b)if(document.scripts[b].src.toLowerCase().indexOf(a.toLowerCase())>=0)return document.scripts[b];return null},loadByIframe:function(a,b,c){var d=document.createElement("iframe");a.visible?(d.style.border="none",d.style.width="1px",d.style.height="1px"):d.style.display="none";var e=function(){var e=null,f=null;try{e=d.contentDocument.body,f=e.textContent||e.innerText}catch(g){}b.call(c||this,f,e,d),a.remove&&document.body.removeChild(d)};d.attachEvent?d.attachEvent("onload",e):d.onload=e,d.src=a.url,document.body.appendChild(d)}}}),a.define("module:HashRouteBinder",["base:Router.RouteBinder","jquery:"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c);var d=this;b(window).on("hashchange.events"+this.cid(),function(){d._localRouteChanged()})},destroy:function(){b(window).off("hashchange.events"+this.cid()),a.destroy.call(this)},_getLocalRoute:function(){var a=window.location.hash;return a.length&&"#"==a[0]?a.slice(1):a},_setLocalRoute:function(a){window.location.hash="#"+a.route}}})}),a.define("module:HistoryRouteBinder",["base:Router.RouteBinder","jquery:"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c);var d=this;this.__used=!1,b(window).on("popstate.events"+this.cid(),function(){d.__used&&d._localRouteChanged()})},destroy:function(){b(window).off("popstate.events"+this.cid()),a.destroy.call(this)},_getLocalRoute:function(){return window.location.pathname},_setLocalRoute:function(a){window.history.pushState({},document.title,a.route),this.__used=!0}}},{supported:function(){return window.history&&window.history.pushState}})}),a.define("module:LocationRouteBinder",["base:Router.RouteBinder"],function(a,b){return a.extend({scoped:b},{_getLocalRoute:function(){return window.location.pathname},_setLocalRoute:function(a){window.location.pathname=a.route}})}),a.define("module:Dom",["base:Objs","jquery:","base:Types","module:Info"],function(a,b,c,d){return{outerHTML:function(a){return!d.isFirefox()||d.firefoxVersion()>=11?a.outerHTML:b("<div>").append(b(a).clone()).html()},changeTag:function(a,b){for(var c=document.createElement(b),d=0;d<a.attributes.length;++d){var e=a.attributes[d];c.setAttribute(e.nodeName,"value"in e?e.value:e.nodeValue)}for(;a.firstChild;)c.appendChild(a.firstChild);return a.parentNode.replaceChild(c,a),c},traverseNext:function(a,c){return"get"in a&&(a=a.get(0)),a.firstChild&&!c?b(a.firstChild):a.parentNode?a.nextSibling?b(a.nextSibling):this.traverseNext(a.parentNode,!0):null},selectNode:function(a,c){a=b(a).get(0);var d=null,e=null;window.getSelection?(d=window.getSelection(),d.removeAllRanges(),e=document.createRange()):document.selection&&(d=document.selection,e=d.createRange()),c?(e.setStart(a,c),e.setEnd(a,c),d.addRange(e)):(e.selectNode(a),d.addRange(e))},selectionStartNode:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).startContainer):document.selection?b(document.selection.createRange().startContainer):null},selectedHtml:function(){return window.getSelection?window.getSelection().toString():document.selection?document.selection.createRange().htmlText:""},selectionAncestor:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).commonAncestorContainer):document.selection?b(document.selection.createRange().parentElement()):null},selectionStartOffset:function(){return window.getSelection?window.getSelection().getRangeAt(0).startOffset:document.selection?document.selection.createRange().startOffset:null},selectionEndOffset:function(){return window.getSelection?window.getSelection().getRangeAt(0).endOffset:document.selection?document.selection.createRange().endOffset:null},selectionStart:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).startContainer):document.selection?b(document.selection.createRange().startContainer):null},selectionEnd:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).endContainer):document.selection?b(document.selection.createRange().endContainer):null},selectionNonEmpty:function(){var a=this.selectionStart(),b=this.selectionEnd();return a&&b&&a.get(0)&&b.get(0)&&(a.get(0)!=b.get(0)||this.selectionStartOffset()!=this.selectionEndOffset())},selectionContained:function(a){return a.has(this.selectionStart()).length>0&&a.has(this.selectionEnd()).length>0},selectionNodes:function(){var a=[],b=this.selectionStart(),c=this.selectionEnd();a.push(b);for(var d=b;d.get(0)!=c.get(0);)d=this.traverseNext(d),a.push(d);return a},selectionLeaves:function(){return a.filter(this.selectionNodes(),function(a){return 0===a.children().length})},contentSiblings:function(a){return a.parent().contents().filter(function(){return this!=a.get(0)})},remove_tag_from_parent_path:function(a,c,d){c=c.toLowerCase(),a=b(a);for(var e=a.parents(d?d+" "+c:c),f=0;f<e.length;++f){var g=e.get(f);for(g=b(g);a.get(0)!=g.get(0);)this.contentSiblings(a).wrap("<"+c+"></"+c+">"),a=a.parent();g.contents().unwrap()}},selectionSplitOffsets:function(){var a=this.selectionStartOffset(),c=this.selectionEndOffset(),d=this.selectionStart(),e=this.selectionEnd(),f=d.get(0)==e.get(0);if(c<e.get(0).wholeText.length){var g=e.get(0);g.splitText(c),e=b(g),f&&(d=e)}a>0&&(d=b(d.get(0).splitText(a)),f&&(e=d)),this.selectRange(d,e)},selectRange:function(a,c,d,e){a=b(a),c=b(c);var f=null,g=null;window.getSelection?(f=window.getSelection(),f.removeAllRanges(),g=document.createRange()):document.selection&&(f=document.selection,g=f.createRange()),g.setStart(a.get(0),d||0),g.setEnd(c.get(0),e||c.get(0).data.length),f.addRange(g)},splitNode:function(a,c,d){if(a=b(a),c=c||0,d=d||a.get(0).data.length,d<a.get(0).data.length){var e=a.get(0);e.splitText(d),a=b(e)}return c>0&&(a=b(a.get(0).splitText(c))),a},entitiesToUnicode:function(a){if(!a||!c.is_string(a)||a.indexOf("&")<0)return a;var d=document.createElement("span");return d.innerHTML=a,a=b(d).text(),d.remove&&d.remove(),a},elementSupportsFullscreen:function(a){return["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].some(function(b){return b in a})},elementEnterFullscreen:function(b){a.iter(["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],function(a){return a in b&&b[a].call(b),!(a in b)})},elementIsFullscreen:function(a){return["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].some(function(b){return document[b]===a})},elementOnFullscreenChange:function(a,c,d){var e=this;b(a).on(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].join(" "),function(){c.call(d||this,a,e.elementIsFullscreen(a))})},elementOffFullscreenChange:function(a){b(a).off(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].join(" "))}}}),a.define("module:DomExtend.DomExtension",["base:Class","jquery:","base:Objs","base:Functions","base:Async","module:DomMutation.NodeRemoveObserver","module:DomMutation.NodeResizeObserver","jquery:"],function(a,b,c,d,e,f,g,h,i){return a.extend({scoped:i},function(a){return{_domMethods:[],_domAttrs:{},constructor:function(b,i){a.constructor.call(this),this._element=b,this._$element=h(b),b.domExtension=this,this._actualBB=null,this._idealBB=null,this._attrs=i||{},c.iter(this._domMethods,function(a){this._element[a]=d.as_method(this[a],this)},this),c.iter(["get","set"],function(a){this._element[a]=d.as_method(this[a],this)},this),e.eventually(function(){this._nodeRemoveObserver=this.auto_destroy(new f(b)),this._nodeRemoveObserver.on("node-removed",this.weakDestroy,this),this._nodeResizeObserver=this.auto_destroy(new g(b)),this._nodeResizeObserver.on("node-resized",function(){this.recomputeBB(),this._notify("resized")},this)},this),this._$element.css("display")&&"inline"!=this._$element.css("display")||this._$element.css("display","inline-block")},domEvent:function(a){this._$element.trigger(a)},readAttr:function(a){return a in this._element.attributes?this._element.attributes[a].value:a in this._element?this._element[a]:this._attrs[a]},hasAttr:function(a){return a in this._element.attributes||a in this._element||a in this._attrs},writeAttr:function(a,b){a in this._element.attributes?this._element.attributes[a].value=b:a in this._element?this._element[a]=b:this._attrs[a]=b},unsetAttr:function(a){delete this._element[a],this._element.removeAttribute(a),delete this._attrs[a]},get:function(a){var b=this._domAttrs[a]||{};if(!b.get)return this.readAttr(a);var c=d.callWithin(this,b.get);return this.writeAttr(a,c),
c},set:function(a,b){this.writeAttr(a,b);var c=this._domAttrs[a]||{};c.set&&d.callWithin(this,c.set,b)},computeActualBB:function(a){var b=this._$element.width();if(this._$element.width()<a.width&&!this._element.style.width){this._element.style.width=a.width+"px",b=this._$element.width();for(var c=this._$element;c.get(0)!=document;)c=c.parent(),b=Math.min(b,c.width());this._element.style.width=null}return{width:b,height:b*a.height/a.width}},idealBB:function(){return null},recomputeBB:function(){var a=this.idealBB();if(a){var b=this.computeActualBB(a);this._idealBB=a,this._actualBB=b,this.setActualBB(b)}},setActualBB:function(a){}}})}),a.define("module:DomMutation.NodeRemoveObserver",["base:Classes.ConditionalInstance","base:Events.EventsMixin"],function(a,b,c){return a.extend({scoped:c},[b,function(a){return{constructor:function(b){a.constructor.call(this),this._node=b},_nodeRemoved:function(a){a===this._node&&this.trigger("node-removed")}}}])}),a.define("module:DomMutation.MutationObserverNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c);var d=this;this._observer=new window.MutationObserver(function(a){b.iter(a,function(a){for(var b=0;b<a.removedNodes.length;++b)d._nodeRemoved(a.removedNodes[b])})}),this._observer.observe(c.parentNode,{childList:!0})},destroy:function(){this._observer.disconnect(),a.destroy.call(this)}}},{supported:function(a){try{return!!window.MutationObserver}catch(b){return!1}}})}),a.define("module:DomMutation.DOMNodeRemovedNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","module:Info","jquery:"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(b){a.constructor.call(this,b);var d=this;c(document).on("DOMNodeRemoved."+this.cid(),function(a){d._nodeRemoved(a.target)})},destroy:function(){c(document).off("DOMNodeRemoved."+this.cid()),a.destroy.call(this)}}},{supported:function(a){return!b.isInternetExplorer()||b.internetExplorerVersion()>=9}})}),a.define("module:DomMutation.TimerNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","base:Timers.Timer","jquery:"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(c){a.constructor.call(this,c),this._timer=new b({context:this,fire:this._fire,delay:100})},destroy:function(){this._timer.weakDestroy(),a.destroy.call(this)},_fire:function(){this._node.parentElement||(this._timer.stop(),this._nodeRemoved(this._node))}}},{supported:function(a){return!0}})}),a.extend("module:DomMutation.NodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","module:DomMutation.MutationObserverNodeRemoveObserver","module:DomMutation.DOMNodeRemovedNodeRemoveObserver","module:DomMutation.TimerNodeRemoveObserver"],function(a,b,c,d){return a.register(b,3),a.register(c,2),a.register(d,1),{}}),a.define("module:DomMutation.NodeResizeObserver",["base:Class","base:Events.EventsMixin","jquery:"],function(a,b,c,d){return a.extend({scoped:d},[b,function(a){return{constructor:function(b){a.constructor.call(this);var d=this;c(window).on("resize."+this.cid(),function(){d._resized()})},destroy:function(){c(window).off("."+this.cid()),a.destroy.call(this)},_resized:function(){this.trigger("node-resized")}}}])}),a.define("module:DomMutation.NodeInsertObserver",["base:Classes.ConditionalInstance","base:Events.EventsMixin"],function(a,b,c){return a.extend({scoped:c},[b,function(a){return{_nodeInserted:function(a,b){if(b)for(var c=0;c<a.childNodes.length;++c)this._nodeInserted(a.childNodes[c],b);this._options.parent&&a.parentNode!==this._options.parent||this._options.root&&!this._options.root.contains(a)||this._options.filter&&!this._options.filter.call(this._options.context||this,a)||this.trigger("node-inserted",a)}}}])}),a.define("module:DomMutation.MutationObserverNodeInsertObserver",["module:DomMutation.NodeInsertObserver","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){c=c||{},a.constructor.call(this,c);var d=this;this._observer=new window.MutationObserver(function(a){b.iter(a,function(a){for(var b=0;b<a.addedNodes.length;++b)d._nodeInserted(a.addedNodes[b],!0)})}),this._observer.observe(this._options.root||this._options.parent||document.body,{childList:!0,subtree:!this._options.parent})},destroy:function(){this._observer.disconnect(),a.destroy.call(this)}}},{supported:function(a){try{return!!window.MutationObserver}catch(b){return!1}}})}),a.define("module:DomMutation.DOMNodeInsertedNodeInsertObserver",["module:DomMutation.NodeInsertObserver","jquery:"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){c=c||{},a.constructor.call(this,c);var d=this;b(document).on("DOMNodeInserted."+this.cid(),function(a){d._nodeInserted(a.target)})},destroy:function(){b(document).off("DOMNodeInserted."+this.cid()),a.destroy.call(this)}}},{supported:function(a){return!0}})}),a.extend("module:DomMutation.NodeInsertObserver",["module:DomMutation.NodeInsertObserver","module:DomMutation.MutationObserverNodeInsertObserver","module:DomMutation.DOMNodeInsertedNodeInsertObserver"],function(a,b,c){return a.register(b,3),a.register(c,2),{}}),a.define("module:Upload.CordovaFileUploader",["module:Upload.FileUploader"],function(a,b){return a.extend({scoped:b},{_upload:function(){var a=this,b=this._options.source.fullPath.split(":")[1],c=new window.FileUploadOptions;c.fileKey="file",c.fileName=b.substr(b.lastIndexOf("/")+1),c.mimeType=this._options.source.type,c.httpMethod="POST",c.params=this._options.data;var d=new window.FileTransfer;d.upload(b,this._options.url,function(b){a._successCallback(b)},function(b){a._errorCallback(b)},c)}},{supported:function(a){var b=!!navigator.device&&!!navigator.device.capture&&!!navigator.device.capture.captureVideo&&!!window.FileTransfer&&!!window.FileUploadOptions&&!a.isBlob&&"localURL"in a.source;return b}})}),a.define("module:Upload.FileUploader",["base:Classes.ConditionalInstance","base:Events.EventsMixin","base:Objs","base:Types"],function(a,b,c,d,e){return a.extend({scoped:e},[b,function(a){return{constructor:function(b){a.constructor.call(this,b),this._state="idle"},_setState:function(a,b){this._state=a,this.trigger(a,b),this.trigger("state",a,b)},state:function(){return this._state},data:function(){return this._data},progress:function(){return{uploaded:this._uploaded,total:this._total}},reset:function(){"error"===this.state()&&(this._setState("idle"),delete this._data,delete this._uploaded,delete this._total)},upload:function(){return"idle"!==this.state()?this:(this._setState("uploading"),this.__upload(),this)},__upload:function(){this._options.resilience--,this._upload()},_upload:function(){},_progressCallback:function(a,b){"uploading"===this.state()&&(this._uploaded=a,this._total=b,this.trigger("progress",a,b))},_successCallback:function(a){"uploading"===this.state()&&(this._data=a,this._setState("success",a))},_errorCallback:function(a){if("uploading"===this.state()){if(this._options.resilience>0)return void this.__upload();this._data=a,this._setState("error",a)}}}}],{_initializeOptions:function(a){return a=a||{},c.extend({serverSupportChunked:!1,serverSupportPostMessage:!1,isBlob:"undefined"!=typeof Blob&&a.source instanceof Blob,resilience:1,data:{}},a)}})}),a.define("module:Upload.CustomUploader",["module:Upload.FileUploader"],function(a,b){return a.extend({scoped:b},{_upload:function(){this.trigger("upload",this._options)},progressCallback:function(a,b){this._progressCallback(a,b)},successCallback:function(a){this._successCallback(a)},errorCallback:function(a){this._errorCallback(a)}})}),a.define("module:Upload.FormDataFileUploader",["module:Upload.FileUploader","module:Info","jquery:","base:Objs"],function(a,b,c,d,e){return a.extend({scoped:e},{_upload:function(){var a=this,b=new FormData;b.append("file",this._options.isBlob?this._options.source:this._options.source.files[0]),d.iter(this._options.data,function(a,c){b.append(c,a)},this),c.ajax({type:"POST",async:!0,url:this._options.url,data:b,cache:!1,contentType:!1,processData:!1,xhr:function(){var b=c.ajaxSettings.xhr();return b.upload&&b.upload.addEventListener("progress",function(b){b.lengthComputable&&a._progressCallback(b.loaded,b.total)},!1),b}}).success(function(b){a._successCallback(b)}).error(function(b){a._errorCallback(b)})}},{supported:function(a){if(b.isInternetExplorer()&&b.internetExplorerVersion()<=9)return!1;try{new FormData}catch(c){return!1}return!0}})}),a.define("module:Upload.FormIframeFileUploader",["module:Upload.FileUploader","base:Net.Uri","base:Objs"],function(a,b,c,d){return a.extend({scoped:d},{_upload:function(){var a=this,d=document.createElement("iframe"),e="upload-iframe-"+this.cid();d.id=e,d.name=e,d.style.display="none";var f=document.createElement("form");f.method="POST",f.target=e,f.style.display="none",document.body.appendChild(d),document.body.appendChild(f);var g=this._options.source.parent;f.appendChild(this._options.source),c.iter(this._options.data,function(a,b){var c=document.createElement("input");c.type="hidden",c.name=b,c.value=a,f.appendChild(c)},this);var h=!("postMessage"in window),i=null,j=function(a){i(a.data)};d.onerror=function(){h&&(window.postMessage=null),window.removeEventListener("message",j),g&&g.appendChild(a._options.source),document.body.removeChild(f),document.body.removeChild(d),a._errorCallback()},f.action=b.appendUriParams(this._options.url,{_postmessage:!0}),f.encoding=f.enctype="multipart/form-data",i=function(b){h&&(window.postMessage=null),window.removeEventListener("message",j),g&&g.appendChild(a._options.source);var c=JSON.parse(b);document.body.removeChild(f),document.body.removeChild(d),a._successCallback(c)},window.addEventListener("message",j),h&&(window.postMessage=i),f.submit()}},{supported:function(a){return!a.isBlob&&a.serverSupportPostMessage}})}),a.extend("module:Upload.FileUploader",["module:Upload.FileUploader","module:Upload.FormDataFileUploader","module:Upload.FormIframeFileUploader","module:Upload.CordovaFileUploader"],function(a,b,c,d){return a.register(b,2),a.register(c,1),a.register(d,4),{}}),a.define("module:Upload.MultiUploader",["module:Upload.FileUploader","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(b){a.constructor.call(this,b),this._uploaders={}},addUploader:function(a){return this._uploaders[a.cid()]=a,a.on("state",this._updateState,this),a.on("progress",this._updateProgress,this),"uploading"===this.state()&&("error"===a.state()&&a.reset(),"idle"===a.state()&&a.upload()),this},_upload:function(){b.iter(this._uploaders,function(a){"error"===a.state()&&a.reset(),"idle"===a.state()&&a.upload()},this),this._updateState()},_updateState:function(){if("uploading"===this.state()){var a=!1,c=!1;if(b.iter(this._uploaders,function(b){c=c||"uploading"===b.state(),a=a||"error"===b.state()},this),!c){var d=[];b.iter(this._uploaders,function(b){var c=a&&"error"===b.state()||!a&&"success"===b.state()?b.data():void 0;d.push(c)},this),a?this._errorCallback(d):this._successCallback(d)}}},_updateProgress:function(){if("uploading"===this.state()){var a=0,c=0;b.iter(this._uploaders,function(b){var d=(b.state(),b.progress());d&&d.total&&("success"===b.state()&&(a+=d.total,c+=d.total),"uploading"===b.state()&&(a+=d.total,c+=d.uploaded))},this),this._progressCallback(c,a)}}}})}),a.define("module:Upload.ResumableFileUploader",["module:Upload.FileUploader","resumablejs:","base:Async","base:Objs","jquery:"],function(a,b,c,d,e,f){return a.extend({scoped:f},{_upload:function(){this._resumable=new b(d.extend({target:this._options.url,headers:this._options.data},this._options.resumable)),this._options.isBlob&&(this._options.source.fileName="blob"),this._resumable.addFile(this._options.isBlob?this._options.source:this._options.source.files[0]);var a=this;this._resumable.on("fileProgress",function(b){var c=a._resumable.getSize();a._progressCallback(Math.floor(a._resumable.progress()*c),c)}),this._resumable.on("fileSuccess",function(b,c){a._options.resumable.assembleUrl?a._resumableSuccessCallback(b,c,a._options.resumable.assembleResilience||1):a._successCallback(c)}),this._resumable.on("fileError",function(b,c){a._errorCallback(c)}),c.eventually(this._resumable.upload,this._resumable)},_resumableSuccessCallback:function(a,b,f){0>=f&&this._errorCallback(b);var g=this;e.ajax({type:"POST",async:!0,url:this._options.resumable.assembleUrl,dataType:null,data:d.extend({resumableIdentifier:a.file.uniqueIdentifier,resumableFilename:a.file.fileName||a.file.name,resumableTotalSize:a.file.size,resumableType:a.file.type},this._options.data),success:function(a){g._successCallback(b)},error:function(d,e,h){return g._options.resumable.acceptedAssembleError&&g._options.resumable.acceptedAssembleError==d.status?void g._successCallback(b):void c.eventually(function(){g._resumableSuccessCallback(a,b,f-1)},g._options.resumable.assembleResilienceTimeout||0)}})}},{supported:function(a){return a.serverSupportChunked&&(new b).support}})}),a.extend("module:Upload.FileUploader",["module:Upload.FileUploader","module:Upload.ResumableFileUploader"],function(a,b){return a.register(b,3),{}})}).call(Scoped);