/*!
betajs-browser - v1.0.0 - 2015-06-18
Copyright (c) Oliver Friedmann
MIT Software License.
*/
(function(){var a=this.subScope();a.binding("module","global:BetaJS.Browser"),a.binding("base","global:BetaJS"),a.binding("jquery","global:jQuery"),a.define("base:$",["jquery:"],function(a){return a}),a.define("module:",function(){return{guid:"02450b15-9bbf-4be2-b8f6-b483bc015d06",version:"26.1434667901335"}}),a.define("module:JQueryAjax",["base:Net.AbstractAjax","base:Net.AjaxException","base:Promise","module:Info","jquery:"],function(a,b,c,d,e,f){return a.extend({scoped:f},function(){return{_syncCall:function(a){var c;return e.ajax({type:a.method,async:!1,url:a.uri,dataType:a.decodeType?a.decodeType:null,data:a.encodeType&&"json"==a.encodeType?JSON.stringify(a.data):a.data,success:function(a){c=a},error:function(a,c,d){var e="";try{e=JSON.parse(a.responseText)}catch(f){e=JSON.parse('"'+a.responseText+'"')}throw new b(a.status,d,e)}}),c},_asyncCall:function(a){var f=c.create();return d.isInternetExplorer()&&d.internetExplorerVersion()<=9&&(e.support.cors=!0),e.ajax({type:a.method,async:!0,url:a.uri,dataType:a.decodeType?a.decodeType:null,data:a.encodeType&&"json"==a.encodeType?JSON.stringify(a.data):a.data,success:function(a){f.asyncSuccess(a)},error:function(a,c,d){var e="";try{e=JSON.parse(a.responseText)}catch(g){e=JSON.parse('"'+a.responseText+'"')}f.asyncError(new b(a.status,d,e))}}),f}}})}),a.define("module:Cookies",["base:Strings"],function(a){return{get:function(b){return a.read_cookie_string(document.cookie,b)},set:function(b,c){document.cookie=a.write_cookie_string(document.cookie,b,c)}}}),a.define("module:Dom",["base:Objs","jquery:"],function(a,b){return{changeTag:function(a,b){for(var c=document.createElement(b),d=0;d<a.attributes.length;++d)c.setAttribute(a.attributes[d].nodeName,a.attributes[d].nodeValue);for(;a.firstChild;)c.appendChild(a.firstChild);return a.parentNode.replaceChild(c,a),c},traverseNext:function(a,c){return"get"in a&&(a=a.get(0)),a.firstChild&&!c?b(a.firstChild):a.parentNode?a.nextSibling?b(a.nextSibling):this.traverseNext(a.parentNode,!0):null},selectNode:function(a,c){a=b(a).get(0);var d=null,e=null;window.getSelection?(d=window.getSelection(),d.removeAllRanges(),e=document.createRange()):document.selection&&(d=document.selection,e=d.createRange()),c?(e.setStart(a,c),e.setEnd(a,c),d.addRange(e)):(e.selectNode(a),d.addRange(e))},selectionStartNode:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).startContainer):document.selection?b(document.selection.createRange().startContainer):null},selectedHtml:function(){return window.getSelection?window.getSelection().toString():document.selection?document.selection.createRange().htmlText:""},selectionAncestor:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).commonAncestorContainer):document.selection?b(document.selection.createRange().parentElement()):null},selectionStartOffset:function(){return window.getSelection?window.getSelection().getRangeAt(0).startOffset:document.selection?document.selection.createRange().startOffset:null},selectionEndOffset:function(){return window.getSelection?window.getSelection().getRangeAt(0).endOffset:document.selection?document.selection.createRange().endOffset:null},selectionStart:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).startContainer):document.selection?b(document.selection.createRange().startContainer):null},selectionEnd:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).endContainer):document.selection?b(document.selection.createRange().endContainer):null},selectionNonEmpty:function(){var a=this.selectionStart(),b=this.selectionEnd();return a&&b&&a.get(0)&&b.get(0)&&(a.get(0)!=b.get(0)||this.selectionStartOffset()!=this.selectionEndOffset())},selectionContained:function(a){return a.has(this.selectionStart()).length>0&&a.has(this.selectionEnd()).length>0},selectionNodes:function(){var a=[],b=this.selectionStart(),c=this.selectionEnd();a.push(b);for(var d=b;d.get(0)!=c.get(0);)d=this.traverseNext(d),a.push(d);return a},selectionLeaves:function(){return a.filter(this.selectionNodes(),function(a){return 0===a.children().length})},contentSiblings:function(a){return a.parent().contents().filter(function(){return this!=a.get(0)})},remove_tag_from_parent_path:function(a,c,d){c=c.toLowerCase(),a=b(a);for(var e=a.parents(d?d+" "+c:c),f=0;f<e.length;++f){var g=e.get(f);for(g=b(g);a.get(0)!=g.get(0);)this.contentSiblings(a).wrap("<"+c+"></"+c+">"),a=a.parent();g.contents().unwrap()}},selectionSplitOffsets:function(){var a=this.selectionStartOffset(),c=this.selectionEndOffset(),d=this.selectionStart(),e=this.selectionEnd(),f=d.get(0)==e.get(0);if(c<e.get(0).wholeText.length){var g=e.get(0);g.splitText(c),e=b(g),f&&(d=e)}a>0&&(d=b(d.get(0).splitText(a)),f&&(e=d)),this.selectRange(d,e)},selectRange:function(a,c,d,e){a=b(a),c=b(c);var f=null,g=null;window.getSelection?(f=window.getSelection(),f.removeAllRanges(),g=document.createRange()):document.selection&&(f=document.selection,g=f.createRange()),g.setStart(a.get(0),d||0),g.setEnd(c.get(0),e||c.get(0).data.length),f.addRange(g)},splitNode:function(a,c,d){if(a=b(a),c=c||0,d=d||a.get(0).data.length,d<a.get(0).data.length){var e=a.get(0);e.splitText(d),a=b(e)}return c>0&&(a=b(a.get(0).splitText(c))),a}}}),a.define("module:FlashDetect",["base:Class"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(){if(a.constructor.call(this),this.__version=null,navigator.plugins&&navigator.plugins.length>0){var b="application/x-shockwave-flash",c=navigator.mimeTypes;c&&c[b]&&c[b].enabledPlugin&&c[b].enabledPlugin.description&&(this.__version=this.parseVersion(c[b].enabledPlugin.description))}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(var d=0;d<this.__activeXDetectRules.length;d++)try{var e=new ActiveXObject(this.__activeXDetectRules[d].name),f=this.__activeXDetectRules[d].version(e);if(f){this.__version=this.parseActiveXVersion(f);break}}catch(g){}},parseVersion:function(a){var b=a.split(/ +/),c=b[2].split(/\./),d=b[3];return{raw:a,major:parseInt(c[0],10),minor:parseInt(c[1],10),revisionStr:d,revision:parseInt(d.replace(/[a-zA-Z]/g,""),10)}},parseActiveXVersion:function(a){var b=a.split(",");return{raw:a,major:parseInt(b[0].split(" ")[1],10),minor:parseInt(b[1],10),revision:parseInt(b[2],10),revisionStr:b[2]}},version:function(){return this.__version},installed:function(){return null!==this.__version},supported:function(){var a=navigator.userAgent;return this.installed()||!(-1!=a.indexOf("iPhone")||-1!=a.indexOf("iPod")||-1!=a.indexOf("iPad"))},majorAtLeast:function(a){return this.installed()&&this.version().major>=a},minorAtLeast:function(a){return this.installed()&&this.version().minor>=a},revisionAtLeast:function(a){return this.installed()&&this.version().revision>=a},versionAtLeast:function(){if(!this.installed())return!1;for(var a=[this.version().major,this.version().minor,this.version().revision],b=Math.min(a.length,arguments.length),c=0;b>c;c++)if(a[c]!=arguments[c])return a[c]>arguments[c];return!0},__activeXDetectRules:[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(a){try{return a.GetVariable("$version")}catch(b){return null}}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(a){try{a.AllowScriptAccess="always";try{return a.GetVariable("$version")}catch(b){return null}}catch(b){return"6,0,21"}}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(a){try{return a.GetVariable("$version")}catch(b){return null}}}]}})}),a.define("module:FlashHelper",["base:Time","base:Objs","base:Types","base:Net.Uri","module:Info","jquery:"],function(a,b,c,d,e,f){return{getFlashObject:function(a){var b=f(a).find("embed").get(0);if(e.isInternetExplorer()&&e.internetExplorerVersion()<=10&&(b=null),b||(b=f(a).find("object").get(0)),!b)for(var c=f("object"),d=0;d<c.length;++d)f(c[d]).closest(a).length>0&&(b=f(c[d]));return b},embedTemplate:function(e){e=e||{};var f=[];f.push({objectKey:"classid",value:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}),f.push({objectKey:"codebase",value:"http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"}),f.push({embedKey:"align",value:"middle"}),f.push({embedKey:"play",value:"true"}),f.push({embedKey:"loop",value:"false"}),f.push({embedKey:"type",value:"application/x-shockwave-flash"}),f.push({embedKey:"pluginspage",value:"http://www.adobe.com/go/getflashplayer"}),f.push({objectParam:"quality",embedKey:"quality",value:"high"}),f.push({objectParam:"allowScriptAccess",embedKey:"allowScriptAccess",value:"always"}),f.push({objectParam:"wmode",embedKey:"wmode",value:"opaque"}),f.push({objectParam:"movie",embedKey:"src",value:e.flashFile+(e.forceReload?"?"+a.now():"")}),e.width&&f.push({objectKey:"width",embedKey:"width",value:e.width}),e.height&&f.push({objectKey:"height",embedKey:"height",value:e.height}),e.bgcolor&&f.push({objectParam:"bgcolor",embedKey:"bgcolor",value:e.bgcolor}),e.FlashVars&&f.push({objectParam:"FlashVars",embedKey:"FlashVars",value:c.is_object(e.FlashVars)?d.encodeUriParams(e.FlashVars):e.FlashVars});var g=[],h=[],i=[];return b.iter(f,function(a){a.objectKey&&g.push(a.objectKey+'="'+a.value+'"'),a.embedKey&&i.push(a.embedKey+'="'+a.value+'"'),a.objectParam&&h.push('<param name="'+a.objectParam+'" value="'+a.value+'" />')},this),"<object "+g.join(" ")+">"+h.join(" ")+"<embed "+i.join(" ")+"></embed></object>"},embedFlashObject:function(a,b){return f(a).html(this.embedTemplate(b)),this.getFlashObject(a)}}}),a.define("module:Hotkeys",["base:Objs","jquery:"],function(a,b){return{SHIFT_NUMS:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},SPECIAL_KEYS:{esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},MODIFIERS:["ctrl","alt","shift","meta"],keyCodeToCharacter:function(a){return 188==a?",":190==a?".":String.fromCharCode(a).toLowerCase()},register:function(c,d,e,f){var g=this;f=a.extend({type:"keyup",propagate:!1,disable_in_input:!1,target:document,keycode:!1},f),f.target=b(f.target);var h=c.toLowerCase().split("+"),i=function(b){if(f.disable_in_input){var c=b.target||b.srcElement||null;if(c&&3==c.nodeType&&(c=c.parentNode),c&&("INPUT"==c.tagName||"TEXTAREA"==c.tagName))return}var i=b.keyCode||b.which||0,j=g.keyCodeToCharacter(i),k=0,l={};a.iter(g.MODIFIERS,function(a){l[a]={pressed:b[a+"Key"],wanted:!1}},this),a.iter(h,function(a){a in l?(l[a].wanted=!0,k++):a.length>1?g.SPECIAL_KEYS[a]==i&&k++:f.keycode?f.keycode==i&&k++:(j==a||b.shiftKey&&g.SHIFT_NUMS[j]==a)&&k++},this),k==h.length&&a.all(l,function(a){return a.wanted==a.pressed})&&(d.apply(e||this),f.propagate||b.preventDefault())};return f.target.on(f.type,i),{target:f.target,type:f.type,func:i}},unregister:function(a){a.target.off(a.type,a.func)}}}),a.define("module:Info",["base:Objs","module:FlashDetect"],function(a,b){return{__navigator:null,getNavigator:function(){return this.__navigator||(this.__navigator={appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,platform:navigator.platform,userAgent:navigator.userAgent,window_chrome:"chrome"in window,window_opera:"opera"in window}),this.__navigator},__cache:{},__cached:function(a,b){if(!(a in this.__cache)){var c=this.getNavigator();this.__cache[a]=b.call(this,c,c.userAgent,c.userAgent.toLowerCase())}return this.__cache[a]},setNavigator:function(a){this.__navigator=a,this.__cache={}},flash:function(){return this.__cached("flash",function(){return new b})},isiOS:function(){return this.__cached("isiOS",function(a,b){return this.isInternetExplorer()?!1:-1!=b.indexOf("iPhone")||-1!=b.indexOf("iPod")||-1!=b.indexOf("iPad")})},isChrome:function(){return this.__cached("isChrome",function(a,b){return(a.window_chrome||-1!=b.indexOf("CriOS"))&&!this.isOpera()})},isOpera:function(){return this.__cached("isOpera",function(a,b){return a.window_opera||b.indexOf(" OPR/")>=0||b.indexOf("OPiOS")>=0})},isAndroid:function(){return this.__cached("isAndroid",function(a,b,c){return-1!=c.indexOf("android")})},isWebOS:function(){return this.__cached("isWebOS",function(a,b,c){return-1!=c.indexOf("webos")})},isWindowsPhone:function(){return this.__cached("isWindowsPhone",function(a,b,c){return-1!=c.indexOf("windows phone")})},isBlackberry:function(){return this.__cached("isBlackberry",function(a,b,c){return-1!=c.indexOf("blackberry")})},iOSversion:function(){return this.__cached("iOSversion",function(a){if(!this.isiOS())return!1;var b=a.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return{major:parseInt(b[1],10),minor:parseInt(b[2],10),revision:parseInt(b[3]||0,10)}})},isMobile:function(){return this.__cached("isMobile",function(){return this.isiOS()||this.isAndroid()||this.isWebOS()||this.isWindowsPhone()||this.isBlackberry()})},isDesktop:function(){return this.__cached("isDesktop",function(){return!this.isMobile()})},isInternetExplorer:function(){return this.__cached("isInternetExplorer",function(){return null!==this.internetExplorerVersion()})},isFirefox:function(){return this.__cached("isFirefox",function(a,b,c){return-1!=c.indexOf("firefox")})},isSafari:function(){return this.__cached("isSafari",function(a,b,c){return!this.isChrome()&&!this.isOpera()&&-1!=c.indexOf("safari")})},isWindows:function(){return this.__cached("isWindows",function(a){return-1!=a.appVersion.toLowerCase().indexOf("win")})},isMacOS:function(){return this.__cached("isMacOS",function(a){return!this.isiOS()&&-1!=a.appVersion.toLowerCase().indexOf("mac")})},isUnix:function(){return this.__cached("isUnix",function(a){return-1!=a.appVersion.toLowerCase().indexOf("x11")})},isLinux:function(){return this.__cached("isLinux",function(a){return!this.isAndroid()&&-1!=a.appVersion.toLowerCase().indexOf("linux")})},internetExplorerVersion:function(){return this.__cached("internetExplorerVersion",function(a,b){if("Microsoft Internet Explorer"==a.appName){var c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),d=c.exec(b);if(d)return d[1]}else if("Netscape"==a.appName){var e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),f=e.exec(a.userAgent);if(f)return parseFloat(f[1])}return null})},inIframe:function(){try{return window.self!==window.top}catch(a){return!0}},__devicesMap:{mobile:{format:"Mobile",check:function(){return this.isMobile()}},desktop:{format:"Desktop",check:function(){return this.isDesktop()}}},__obtainMatch:function(b,c){var d=null;return a.iter(b,function(b,c){if(b.check.apply(this)){if(d)return d=null,!1;d=a.clone(b,1),delete d.check,d.key=c}},this),d||c},getDevice:function(){return this.__cached("getDevice",function(){return this.__obtainMatch(this.__devicesMap,{key:"unknown",format:"Unknown Device"})})},formatDevice:function(){return this.getDevice().format},__osMap:{macosx:{format:"Mac OS-X",check:function(){return this.isMacOS()}},windows:{format:"Windows",check:function(){return this.isWindows()}},unix:{format:"Unix",check:function(){return this.isUnix()}},linux:{format:"Linux",check:function(){return this.isLinux()}},ios:{format:"iOS",check:function(){return this.isiOS()},version:function(){return this.iOSversion().major+"."+this.iOSversion().minor+"."+this.iOSversion().revision}},android:{format:"Android",check:function(){return this.isAndroid()}},webos:{format:"WebOS",check:function(){return this.isWebOS()}},windowsphone:{format:"Windows Phone",check:function(){return this.isWindowsPhone()}},blackberry:{format:"Blackberry",check:function(){return this.isBlackberry()}}},getOS:function(){return this.__cached("getOS",function(){return this.__obtainMatch(this.__osMap,{key:"unknown",format:"Unknown Operating System"})})},formatOS:function(){return this.getOS().format},formatOSVersion:function(){return this.getOS().version?this.getOS().version.apply(this):""},__browserMap:{chrome:{format:"Chrome",check:function(){return this.isChrome()}},opera:{format:"Opera",check:function(){return this.isOpera()}},internetexplorer:{format:"Internet Explorer",check:function(){return this.isInternetExplorer()},version:function(){return this.internetExplorerVersion()}},firefox:{format:"Firefox",check:function(){return this.isFirefox()}},safari:{format:"Safari",check:function(){return this.isSafari()}},android:{format:"Android",check:function(){return this.isAndroid()&&!this.isChrome()}},webos:{format:"WebOS",check:function(){return this.isWebOS()}},windowsphone:{format:"Windows Phone",check:function(){return this.isWindowsPhone()}},blackberry:{format:"Blackberry",check:function(){return this.isBlackberry()}}},getBrowser:function(){return this.__cached("getBrowser",function(){return this.__obtainMatch(this.__browserMap,{key:"unknown",format:"Unknown Browser"})})},formatBrowser:function(){return this.getBrowser().format},formatBrowserVersion:function(){return this.getBrowser().version?this.getBrowser().version.apply(this):""},formatFlash:function(){return this.flash().installed()?"Flash "+this.flash().version().raw:this.flash().supported()?"Flash not installed but supported":"Flash not supported"}}}),a.define("module:Loader",["jquery:"],function(a){return{loadScript:function(a,b,c){var d=!1,e=document.getElementsByTagName("head")[0],f=document.createElement("script");f.src=a,f.onload=f.onreadystatechange=function(){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,f.onload=f.onreadystatechange=null,b&&b.call(c||this,a))},e.appendChild(f)},loadStyles:function(a,b,c){var d=!1,e=document.getElementsByTagName("head")[0],f=document.createElement("link");f.rel="stylesheet",f.href=a,f.onload=f.onreadystatechange=function(){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,f.onload=f.onreadystatechange=null,b&&b.call(c||this,a))},e.appendChild(f)},inlineStyles:function(b){a("<style>"+b+"</style>").appendTo("head")},loadHtml:function(b,c,d){a.ajax({url:b,dataType:"html"}).done(function(a){c.call(d||this,a,b)})},findScript:function(a){for(var b=0;b<document.scripts.length;++b)if(document.scripts[b].src.toLowerCase().indexOf(a.toLowerCase())>=0)return document.scripts[b];return null}}}),a.define("module:HashRouteBinder",["base:Router.RouteBinder","jquery:"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c);var d=this;b(window).on("hashchange.events"+this.cid(),function(){d._localRouteChanged()})},destroy:function(){b(window).off("hashchange.events"+this.cid()),a.destroy.call(this)},_getLocalRoute:function(){var a=window.location.hash;return a.length&&"#"==a[0]?a.slice(1):a},_setLocalRoute:function(a){window.location.hash="#"+a.route}}})}),a.define("module:HistoryRouteBinder",["base:Router.RouteBinder","jquery:"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c);var d=this;this.__used=!1,b(window).on("popstate.events"+this.cid(),function(){d.__used&&d._localRouteChanged()})},destroy:function(){b(window).off("popstate.events"+this.cid()),a.destroy.call(this)},_getLocalRoute:function(){return window.location.pathname},_setLocalRoute:function(a){window.history.pushState({},document.title,a.route),this.__used=!0}}},{supported:function(){return window.history&&window.history.pushState}})}),a.define("module:LocationRouteBinder",["base:Router.RouteBinder"],function(a,b){return a.extend({scoped:b},{_getLocalRoute:function(){return window.location.pathname},_setLocalRoute:function(a){window.location.pathname=a.route}})})}).call(Scoped);